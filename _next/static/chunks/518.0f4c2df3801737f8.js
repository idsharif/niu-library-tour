"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518,2704],{53495:function(n,o,t){t.d(o,{a$:function(){return M},BT:function(){return j},Og:function(){return z},xd:function(){return I},Eu:function(){return Z},yo:function(){return E},yY:function(){return T},$d:function(){return P}});var i=t(7297),e=t(38505),l=t(19521),r=t(29750);function c(){var n=(0,i.Z)(["\n  0% {\n    transform: scale(0.9);\n    box-shadow: 0 0 0 0 rgba(255 255 255 / .5);\n  }\n  70% {\n    transform: scale(1);\n    box-shadow: 0 0 0 50px rgba(255 255 255 / 0);\n  }\n  100% {\n    transform: scale(0.9);\n    box-shadow: 0 0 0 0 rgba(255 255 255 / 0);\n  }\n"]);return c=function(){return n},n}function a(){var n=(0,i.Z)(["\n  from {\n    transform: translateY(0px);\n  }\n  to {\n    transform: translateY(",");\n  }\n"]);return a=function(){return n},n}function d(){var n=(0,i.Z)(["\n  from {\n    stroke-dashoffset: 800;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n"]);return d=function(){return n},n}function u(){var n=(0,i.Z)(["\n  0% {\n    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.5);\n  }\n  70%,\n  100% {\n    box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);\n  }\n"]);return u=function(){return n},n}var s=(0,l.F4)(c()),v=(0,l.F4)(d()),f=(0,l.F4)(u());function p(){var n=(0,i.Z)(["\n      background-color: ",";\n      border: 2px solid #ffffff;\n      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.25);\n    "]);return p=function(){return n},n}function h(){var n=(0,i.Z)(["\n          fill: ",";\n        "]);return h=function(){return n},n}function m(){var n=(0,i.Z)(["\n  ",";\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  ","\n  &.star span.icon {\n    margin-top: 7%;\n  }\n  &.triangle span.icon {\n    margin-top: 10%;\n  }\n  &.yinyang span.icon {\n    display: none;\n  }\n  &.diamond span.icon {\n    margin-top: -8%;\n  }\n  svg {\n    width: 100%;\n    height: 100%;\n    overflow: visible;\n    filter: drop-shadow(0px 4px 6px rgba(0, 0, 0, 0.4));\n    path {\n      stroke: #fff;\n      stroke-width: 46px;\n      ","\n    }\n  }\n  .icon {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    i {\n      color: "," !important;\n    }\n  }\n"]);return m=function(){return n},n}function g(){var n=(0,i.Z)(["\n  width: 100%;\n  height: auto;\n"]);return g=function(){return n},n}function w(){var n=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n"]);return w=function(){return n},n}function y(){var n=(0,i.Z)(["\n        fill: ",";\n      "]);return y=function(){return n},n}function b(){var n=(0,i.Z)(["\n        fill: ",";\n      "]);return b=function(){return n},n}function x(){var n=(0,i.Z)(["\n  position: relative;\n  svg {\n    ","\n  }\n  path {\n    ","\n  }\n  img {\n    position: absolute;\n    border-radius: 50%;\n    height: auto;\n    width: 70%;\n    height: auto;\n    aspect-ratio: 1/1;\n    left: 0;\n    right: 0;\n    top: 10%;\n    margin: auto;\n  }\n  #id_marker1 {\n    img {\n      top: 11%;\n    }\n  }\n  #id_marker2 {\n    img {\n      top: 9%;\n      border-radius: 10%;\n    }\n  }\n  #id_marker3 {\n    img {\n      top: 9.5%;\n    }\n  }\n  #id_marker4 {\n    img {\n      top: 11%;\n    }\n  }\n  #id_marker5 {\n    img {\n      top: 11%;\n    }\n  }\n  #id_marker6 {\n    img {\n      top: 8%;\n    }\n  }\n  #id_marker7 {\n    img {\n      top: 9.5%;\n    }\n  }\n  #id_marker8 {\n    img {\n      top: 12%;\n    }\n  }\n  #id_marker9 {\n    img {\n      top: 12%;\n    }\n  }\n  #id_marker10 {\n    img {\n      top: 9%;\n    }\n  }\n  #id_marker11 {\n    img {\n      top: 10.5%;\n    }\n  }\n  #id_marker12 {\n    img {\n      top: 10%;\n    }\n  }\n  #id_marker13 {\n    img {\n      top: 10%;\n    }\n  }\n  #id_marker14 {\n    img {\n      top: 11.5%;\n    }\n  }\n  #id_marker15 {\n    img {\n      top: 7.5%;\n    }\n  }\n  #id_marker16 {\n    img {\n      border-radius: 10%;\n      top: 10%;\n      width: 64%;\n    }\n  }\n"]);return x=function(){return n},n}function _(){var n=(0,i.Z)(["\n  background: ",";\n  border: 2px solid #ffffff;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.25);\n  border-radius: 50%;\n  ",";\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  transition: var(--transition-smooth);\n  i {\n    font-size: 18px;\n    color: ",";\n  }\n  @media (hover: hover) and (pointer: fine) {\n    &:hover {\n      transform: scale(1.2);\n    }\n  }\n"]);return _=function(){return n},n}function k(){var n=(0,i.Z)(["\n      visibility: hidden;\n    "]);return k=function(){return n},n}function C(){var n=(0,i.Z)(["\n  ","\n  position: relative;\n  width: ","px;\n  height: ",";\n  .content {\n    width: 100%;\n    height: 100%;\n    opacity: ",";\n    transform: rotate(","deg);\n    ",", "," {\n      i {\n        font-size: ","px;\n      }\n    }\n    animation-iteration-count: infinite;\n    animation-duration: var(--animate-duration) !important;\n    ",";\n    &.pulse-grow {\n      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.25);\n      animation: "," 1.5s infinite;\n      animation-duration: 1500ms !important;\n    }\n    &.raise {\n      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.25);\n      animation: ","\n        500ms infinite alternate cubic-bezier(0.2, 0.65, 0.6, 1);\n      animation-duration: 2000ms !important;\n    }\n    border-radius: 50%;\n    position: relative;\n  }\n  .--title {\n    color: #fff;\n    top: -32px;\n    left: 50%;\n    // min-width: 100%;\n    font-weight: 600;\n    text-align: center;\n    position: absolute;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0.35);\n    border-radius: 4px;\n    padding: 4px 6px;\n    z-index: 20;\n    transform: translate(-50%);\n    text-shadow: 0 1px 4px #000;\n    em {\n      color: #fff;\n      text-align: center;\n      font-style: initial;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n"]);return C=function(){return n},n}function A(){var n=(0,i.Z)(["\n  width: "," !important;\n  height: "," !important;\n  transform: ","\n    rotate(","deg);\n  background-color: ",";\n  opacity: ",";\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 20;\n  transform-origin: 0 0;\n  .target {\n    width: 100%;\n    height: 100%;\n    object-fit: ",";\n  }\n  i {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: auto;\n    z-index: 30;\n    color: #fff;\n    background: rgb(0 0 0 / 0.5);\n    width: 5rem;\n    height: 5rem;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.5rem;\n    transition: var(--transition-smooth);\n    transform: scale(0.5);\n    opacity: 0;\n    cursor: pointer;\n  }\n  @media (hover: hover) and (pointer: fine) {\n    &:hover {\n      i {\n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n  }\n  @media (hover: none) {\n    i {\n      transform: scale(1);\n      opacity: 1;\n    }\n  }\n"]);return A=function(){return n},n}function S(){var n=(0,i.Z)(["\n  width: 50%;\n  height: 50%;\n  .calloutWrapper {\n    width: 100%;\n    height: 100%;\n    .point {\n      width: 100%;\n      height: 100%;\n      .--dot {\n        width: 100%;\n        height: 100%;\n        background: #fff;\n        border-radius: 50%;\n        animation: "," ease-out 3s forwards infinite;\n      }\n    }\n    .--main {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%)\n        rotate(","deg);\n      transform-origin: left bottom;\n    }\n    .line {\n      width: 0;\n      height: 2px;\n      background-color: #fff;\n      top: 50%;\n      transform: translateY(-50%);\n      position: absolute;\n      left: 50%;\n      transition: var(--transition-smooth);\n    }\n    .--content {\n      position: absolute;\n      left: 120px;\n      top: 50%;\n      &.--type-text {\n        height: 2px;\n        transform-origin: bottom left;\n        transform: translateY(-50%)\n          rotate(","deg);\n        .--img {\n          display: none;\n        }\n        .--line {\n          width: 0;\n          // width: 100%;\n          height: 2px;\n          margin-left: -1px;\n          background-color: #fff;\n          transition: var(--transition-smooth);\n          svg {\n            display: none;\n          }\n        }\n        .--text {\n          width: 0;\n          transition: var(--transition-smooth);\n          overflow: hidden;\n          pointer-events: none;\n          transform: translateY(calc(-100% + 20px));\n          &:after {\n            content: '';\n            width: 2px;\n            height: 0;\n            background: #fff;\n            display: block;\n            transition: var(--transition-smooth);\n            position: absolute;\n            top: 50%;\n            transform: translateY(-50%);\n          }\n        }\n        .--inner {\n          width: max-content;\n          pointer-events: auto;\n          position: relative;\n          max-width: 280px;\n          @media (max-width: 575px) {\n            max-width: 200px;\n          }\n        }\n        .--mainTitle {\n          background: var(--color-primary);\n          color: var(--color-text);\n          display: block;\n          padding: 4px 12px;\n          width: max-content;\n          // margin-bottom: 6px;\n          font-size: 0.9rem;\n          font-weight: 700;\n          line-height: 20px;\n          max-width: 100%;\n          width: 100%;\n        }\n        article {\n          color: #fff;\n          font-weight: 500;\n          text-shadow: 0 1px 4px #000;\n          max-width: 100%;\n          background: rgba(0, 0, 0, 0.35);\n          padding: 10px;\n        }\n      }\n      &.--type-img {\n        transform: translate(-20px, -50%)\n          rotate(","deg);\n        width: 160px;\n        height: 160px;\n        .--line {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: calc(100% + 10px);\n          height: calc(100% + 10px);\n          z-index: -1;\n          svg {\n            display: block;\n            width: 100%;\n            height: 100%;\n            @media (max-width: 575px) {\n              circle {\n                stroke-width: 4px;\n                r: 60px;\n              }\n            }\n          }\n          #path {\n            stroke-dasharray: 800;\n            opacity: 0;\n          }\n        }\n        .--text {\n          display: none;\n        }\n        .--img {\n          width: 0;\n          height: 0;\n          overflow: hidden;\n          border-radius: 50%;\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          margin: auto;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          transition: var(--transition-smooth);\n        }\n        .--inner {\n          width: max-content;\n          height: max-content;\n          pointer-events: auto;\n          position: relative;\n        }\n      }\n\n      .--img {\n        .--inner {\n          img {\n            width: 160px;\n            height: 160px;\n            border-radius: 50%;\n            object-fit: cover;\n            @media (max-width: 575px) {\n              width: 120px;\n              height: 120px;\n            }\n          }\n        }\n      }\n    }\n    &.active {\n      width: 120px;\n      height: 120px;\n      .line {\n        width: 120px;\n      }\n    }\n    &.show {\n      .line {\n        width: 120px;\n      }\n      .--content {\n        &.--type-text {\n          .--line {\n            /* width: 100%; */\n            /* transition-delay: 0.8s; */\n          }\n          .--text {\n            width: 100%;\n            transition-delay: 0.8s;\n            &:after {\n              height: 100%;\n              transition-delay: 0.8s;\n            }\n          }\n        }\n        &.--type-img {\n          .--img {\n            width: 100%;\n            height: 100%;\n            opacity: 1;\n            transition-delay: 0.8s;\n            img {\n            }\n          }\n          #path {\n            opacity: 1;\n            animation: "," 2s ease-out forwards;\n            animation-delay: 0.5s;\n            transition-delay: 0.5s;\n          }\n        }\n      }\n    }\n  }\n"]);return S=function(){return n},n}var P=l.ZP.div.withConfig({displayName:"styled__ShapeIconWrapper",componentId:"Panoee__sc-28023790-0"})(m(),e.b0,function(n){return!n.isRenderShape&&(0,l.iv)(p(),n.bgColor||"var(--color-red)")},function(n){return(0,l.iv)(h(),n.bgColor||"var(--color-red)")},function(n){return n.iconColor||"#fff"}),Z=l.ZP.img.withConfig({displayName:"styled__ImageIconWrapper",componentId:"Panoee__sc-28023790-1"})(g()),E=l.ZP.div.withConfig({displayName:"styled__LottieIconWrapper",componentId:"Panoee__sc-28023790-2"})(w()),T=l.ZP.div.withConfig({displayName:"styled__MarkerIconWrapper",componentId:"Panoee__sc-28023790-3"})(x(),function(n){return n.color&&(0,l.iv)(y(),n.color)},function(n){return n.color&&(0,l.iv)(b(),n.color)}),j=l.ZP.div.withConfig({displayName:"styled__DefaultIconWrapper",componentId:"Panoee__sc-28023790-4"})(_(),function(n){return n.bgColor||r.n$},e.b0,function(n){return n.iconColor||r.IM}),I=l.ZP.div.withConfig({displayName:"styled__HotspotWrapper",componentId:"Panoee__sc-28023790-5"})(C(),function(n){return n.isHidden&&(0,l.iv)(k())},function(n){return("image"===n.type?24:"marker"===n.type?20:"lottie"===n.type?32:"icon-shape"===n.type?14.7:10.7)*(n.size||3)},function(n){return"image"===n.type||"marker"===n.type||"lottie"===n.type?"auto":"icon-shape"===n.type?"".concat(14.7*(n.size||3),"px"):"".concat(10.7*(n.size||3),"px")},function(n){return n.opacity},function(n){return n.rotate},P,j,function(n){return 4.7*(n.size||3)},e.b0,s,function(n){var o;return o="image"===n.type?"auto":"".concat(14*(n.size||3),"px"),(0,l.F4)(a(),o)}),z=l.ZP.div.withConfig({displayName:"styled__HotspotMediaWrapper",componentId:"Panoee__sc-28023790-6"})(A(),function(n){return n.width},function(n){return n.height},function(n){return n.transform},function(n){return n.rotate||0},function(n){return n.backgroundColor},function(n){return n.opacity},function(n){return n.displayType}),M=l.ZP.div.withConfig({displayName:"styled__CalloutIconWrapper",componentId:"Panoee__sc-28023790-7"})(S(),f,function(n){return n.degrees||45},function(n){return-(n.degrees||45)},function(n){return-(n.degrees||45)},v)},82704:function(n,o,t){t.r(o),t.d(o,{LoadingContainer:function(){return s},default:function(){return v}});var i=t(85893),e=t(67294),l=t(50888),r=t(11382),c=t(7297);function a(){var n=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n  .ant-spin {\n    color: #d1005c;\n    &-container {\n      width: 100%;\n      height: 100%;\n    }\n    &-nested-loading {\n      width: 100%;\n      height: 100%;\n      > div > .ant-spin {\n        width: 100%;\n        height: 100%;\n        max-height: 100%;\n      }\n    }\n  }\n"]);return a=function(){return n},n}var d=t(19521).ZP.div.withConfig({displayName:"styled__LoadingContainerWrapper",componentId:"Panoee__sc-25029517-0"})(a()),u=(0,i.jsx)(l.Z,{style:{fontSize:24},spin:!0}),s=(0,e.memo)(function(n){var o=n.loading,t=n.description,e=n.children;return(0,i.jsx)(d,{children:(0,i.jsx)(r.Z,{indicator:u,tip:void 0===t?"":t,spinning:void 0!==o&&o,children:e})})}),v=s},30518:function(n,o,t){t.r(o),t.d(o,{default:function(){return $}});var i,e,l=t(41799),r=t(69396),c=t(828),a=t(85893),d=t(5152),u=t.n(d),s=t(67294),v=t(25617),f=t(47568),p=t(70655),h=t(27556),m=t(97762),g=t(20745),w=t(7400),y=t(5239),b=t(91612),x=t(10808),_=t(82704),k=t(95898),C=u()(function(){return Promise.all([t.e(1577),t.e(6592)]).then(t.bind(t,88922))},{loadableGenerated:{webpack:function(){return[88922]}}}),A=u()(function(){return t.e(2221).then(t.bind(t,82221))},{loadableGenerated:{webpack:function(){return[82221]}}}),S=(0,s.forwardRef)(function(n,o){var t=n.commentScene,i=n.onCreateCommentScene,e=n.onUpdateCommentScene,l=n.onDeleteCommentScene,r=(0,c.Z)((0,s.useState)(!1),2),d=r[0],u=r[1],v=(0,c.Z)((0,y.yG)("krpanoRef"),1)[0],f=(0,c.Z)((0,y.yG)("commentSceneSelected"),2),p=f[0],h=f[1],m=(0,c.Z)((0,y.yG)("loading"),1)[0];(0,s.useEffect)(function(){return function(){u(!1)}},[]),(0,s.useEffect)(function(){p?u(p.id===t.id):u(!1)},[p]);var g=(0,s.useCallback)(function(){h(null)},[h]),w=(0,s.useCallback)(function(n){return i(n,v)},[v,i]),b=(0,s.useCallback)(function(n){return e(n,v)},[v,e]),S=(0,s.useCallback)(function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l(n,v,o)},[v,l]);return(0,s.useImperativeHandle)(o,function(){return{onClose:function(){u(!1),g()}}}),(0,a.jsx)(x.Z,{open:d,content:(0,a.jsx)(_.default,{loading:m,children:(0,a.jsx)(C,{onClose:g,commentSceneSelected:t,onCreateCommentScene:w,onUpdateCommentScene:b,onDeleteCommentScene:S})}),placement:"bottomLeft",destroyTooltipOnHide:!0,trigger:"click",zIndex:99,children:(0,a.jsxs)(k.TM,{className:t.isResolved?"resolved":"",children:[(0,a.jsx)(A,{src:"".concat("/static","/core/comment.svg"),name:"4"}),(0,a.jsx)("span",{className:"--icon",children:(null==t?void 0:t.index)||0})]})})}),P=t(53495),Z=u()(function(){return t.e(5035).then(t.bind(t,55035))},{loadableGenerated:{webpack:function(){return[55035]}}}),E=(0,s.forwardRef)(function(n,o){var t,i,e,l,r,d,u,v,f,p,h,m,g,w,y,b,x=n.hotspot,_=n.listPost,k=n.isSoundOn,C=n.onClickHotspot,A=(0,s.useRef)(null),S=(0,c.Z)((0,s.useState)(!1),2),E=S[0],T=S[1],j=(0,c.Z)((0,s.useState)(!1),2),I=j[0],z=j[1],M=(0,s.useMemo)(function(){var n,o,t,i;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.type)==="media-image"?null==x?void 0:null===(t=x.config)||void 0===t?void 0:null===(i=t.media)||void 0===i?void 0:i.post_id:""},[x]),F=(0,s.useMemo)(function(){var n,o;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.type)||"media-video"},[x]),R=(0,s.useMemo)(function(){var n,o,t,i;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.type)==="media-video"&&((null==x?void 0:null===(t=x.config)||void 0===t?void 0:null===(i=t.media)||void 0===i?void 0:i.loop)||!1)},[x]),N=(0,s.useMemo)(function(){var n,o,t,i;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.type)==="media-video"&&((null==x?void 0:null===(t=x.config)||void 0===t?void 0:null===(i=t.media)||void 0===i?void 0:i.autoPlay)||!1)},[x]),L=(0,s.useMemo)(function(){var n,o,t,i;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.type)==="media-video"&&(null==x?void 0:null===(t=x.config)||void 0===t?void 0:null===(i=t.media)||void 0===i?void 0:i.volume)||0},[x]),H=(0,s.useMemo)(function(){var n,o;return null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.action},[x]),O=(0,s.useMemo)(function(){var n,o;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.width)||"250px"},[x]),D=(0,s.useMemo)(function(){var n,o;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.height)||"200px"},[x]),W=(0,s.useMemo)(function(){var n,o;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.transform)||""},[x]),G=(0,s.useMemo)(function(){var n,o;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.rotate)||0},[x]),U=(0,s.useMemo)(function(){var n,o;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.backgroundColor)||"#00000000"},[x]),V=(0,s.useMemo)(function(){var n,o;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.opacity)||1},[x]),B=(0,s.useMemo)(function(){var n,o;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.displayType)||"none"},[x]),q=(0,s.useMemo)(function(){var n,o;return(null==x?void 0:null===(n=x.config)||void 0===n?void 0:null===(o=n.media)||void 0===o?void 0:o.content)||""},[x]);(0,s.useEffect)(function(){if("media-video"===F&&A.current){if(N)try{A.current.muted=!0,A.current.autoplay=!0,T(!0)}catch(n){}else A.current.pause()}},[N,F]),(0,s.useEffect)(function(){"media-video"===F&&A.current&&(A.current.volume=k?L/100:0,A.current.muted=!k||0===L)},[L,k,F]);var K=(0,s.useCallback)(function(){return z(!0)},[]),Y=(0,s.useCallback)(function(){return z(!1)},[]),$=(0,s.useCallback)(function(){switch(F){case"media-video":if("play/pause"===H){var n,o;T(null===(n=A.current)||void 0===n?void 0:n.paused),(null===(o=A.current)||void 0===o?void 0:o.paused)?A.current.play():A.current.pause()}else C({hotspot:x});break;case"media-image":"open-post"===H?K():C({hotspot:x})}},[H,x,C,K,F]);return(0,s.useImperativeHandle)(o,function(){return{onToggleMute:function(n){A.current&&(A.current.muted=n,A.current.volume=n?0:L/100)}}},[L]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Og,{width:O,height:D,opacity:V,rotate:G,transform:W,displayType:B,backgroundColor:U,children:"media-video"===F?(0,a.jsxs)(a.Fragment,{children:[H&&(0,a.jsx)("i",{className:"fas fa-".concat("zoom"===H?"search-plus":"play/pause"===H?E?"pause":"play":""),onClick:$,onTouchStart:$}),(0,a.jsxs)("video",{ref:A,loop:R,autoPlay:!0,className:"target",playsInline:!0,muted:!0,preload:"metadata",children:[(null==x?void 0:null===(t=x.config)||void 0===t?void 0:null===(i=t.media)||void 0===i?void 0:i.type)==="media-video"&&(null==x?void 0:null===(e=x.config)||void 0===e?void 0:null===(l=e.media)||void 0===l?void 0:null===(r=l.mediaIOS)||void 0===r?void 0:r.src)&&(0,a.jsx)("source",{src:(null==x?void 0:null===(d=x.config)||void 0===d?void 0:null===(u=d.media)||void 0===u?void 0:u.type)==="media-video"?(null==x?void 0:null===(v=x.config)||void 0===v?void 0:null===(f=v.media)||void 0===f?void 0:null===(p=f.mediaIOS)||void 0===p?void 0:p.src)+"#t=0.001":"",type:'video/mp4; codecs="hvc1"'}),(0,a.jsx)("source",{src:(null==x?void 0:null===(h=x.config)||void 0===h?void 0:null===(m=h.media)||void 0===m?void 0:null===(g=m.media)||void 0===g?void 0:g.src)||"#t=0.001",type:"video/mp4"})]})]}):"media-image"===F?(0,a.jsxs)(a.Fragment,{children:[H&&(0,a.jsx)("i",{"aria-hidden":!0,className:"fas fa-".concat("zoom"===H?"search-plus":"open-post"===H?"info-circle":""),onClick:$,onTouchStart:$}),(0,a.jsx)("img",{src:null==x?void 0:null===(w=x.config)||void 0===w?void 0:null===(y=w.media)||void 0===y?void 0:null===(b=y.media)||void 0===b?void 0:b.src,className:"target",alt:""})]}):"media-text"===F?(0,a.jsx)("div",{className:"target",dangerouslySetInnerHTML:{__html:q||""},onClick:$,onTouchStart:$}):(0,a.jsx)("div",{})}),I&&(0,a.jsx)(Z,{idPost:M,listPost:_,visible:I,onCancel:Y})]})}),T=t(39252),j=t(29750),I=function(n){var o=n.scene,t=n.krpanoId,i=window,e=(0,c.Z)((0,y.FN)("zoom"),2)[1],a=(0,c.Z)((0,y.EB)("hlookat"),2)[1],d=(0,c.Z)((0,y.Oj)("vlookat"),2)[1],u=(0,s.useMemo)(function(){return(((null==o?void 0:o.mode)==="staging"?null==o?void 0:o.staging:(null==o?void 0:o.mode)==="day2dust"?null==o?void 0:o.day2dust:[])||[]).map(function(n){var o,t,i,e;return(0,r.Z)((0,l.Z)({},n),{xml:(null==n?void 0:null===(o=n.media)||void 0===o?void 0:o.krpano_xml)||"",urlTour:(null==n?void 0:null===(t=n.media)||void 0===t?void 0:t.src_preview)||(null==n?void 0:null===(i=n.media)||void 0===i?void 0:i.src_thumb)||(null==n?void 0:null===(e=n.media)||void 0===e?void 0:e.src)})})},[o]),v=(0,s.useCallback)(function(){i[t].call("mod(cur_hlookat,".concat(i[t].get("view.hlookat"),",360)")),i[t].call("mod(cur_Vlookat,".concat(i[t].get("view.vlookat"),",360)")),a(+i[t].get("cur_hlookat")),d(+i[t].get("cur_Vlookat")),i[t].call("update_hotspot_visiblity()")},[i,t,a,d]),f=(0,s.useCallback)(function(){e(+i[t].get("view.fov"))},[i,t,e]),p=(0,s.useCallback)(function(n){var l,r,c,u,s,v,f,p,h,m,g,w,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"drag";i[t].set("view.limitview","range"),a((null==o?void 0:null===(l=o.config)||void 0===l?void 0:null===(r=l.default_view)||void 0===r?void 0:r.x)!==void 0?null==o?void 0:null===(c=o.config)||void 0===c?void 0:null===(u=c.default_view)||void 0===u?void 0:u.x:i[t].get("view.hlookat")),d((null==o?void 0:null===(s=o.config)||void 0===s?void 0:null===(v=s.default_view)||void 0===v?void 0:v.y)!==void 0?null==o?void 0:null===(f=o.config)||void 0===f?void 0:null===(p=f.default_view)||void 0===p?void 0:p.y:i[t].get("view.vlookat")),e((null==o?void 0:null===(h=o.config)||void 0===h?void 0:null===(m=h.default_view)||void 0===m?void 0:m.zoom_lv)!==void 0?null==o?void 0:null===(g=o.config)||void 0===g?void 0:null===(w=g.default_view)||void 0===w?void 0:w.zoom_lv:i[t].get("view.fov")),i[t].set("showerrors",!1),n?i[t].call("followmouse_disable()"):i[t].call("followmouse_enable()"),y&&"drag"!==y&&(i[t].set("control.mouse",y),i[t].set("control.touch",y))},[o,i,t,e,a,d]),m=(0,s.useCallback)(function(){Object.entries(j.$i).forEach(function(n){var e=(0,c.Z)(n,2),l=e[0];Object.entries(e[1]).forEach(function(n){var e=(0,c.Z)(n,2),r=e[0],a=e[1],d=o&&(null==o?void 0:o.configPlugin)&&(null==o?void 0:o.configPlugin[l])&&(null==o?void 0:o.configPlugin[l][r])?null==o?void 0:o.configPlugin[l][r]:a;i[t].set("plugin[".concat(l,"].").concat(r),d)})})},[i,t,o]),g=(0,s.useCallback)(function(){var n,t,i,e,l,r,c,a,d,u,s,v,f,p,h,m,g,w,y,b,x,_,k,C,A,S,P,Z,E,T,I,z,M,F,R,N,L,H,O,D,W,G,U,V,B,q,K,Y,$,J,X,Q,nn,no,nt,ni,ne,nl,nr,nc,na,nd,nu,ns,nv,nf,np,nh,nm=(null==o?void 0:null===(n=o.config)||void 0===n?void 0:n.typeTransition)==="3d"?"OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)":null==o?void 0:null===(t=o.config)||void 0===t?void 0:t.typeTransition,ng="<view ",nw=(null==o?void 0:null===(i=o.config)||void 0===i?void 0:null===(e=i.default_view)||void 0===e?void 0:e.zoom_lv)||90;return(null==o?void 0:null===(l=o.config)||void 0===l?void 0:l.isLittlePlanet)||((null==o?void 0:null===(nl=o.config)||void 0===nl?void 0:null===(nr=nl.default_view)||void 0===nr?void 0:nr.x)!==void 0&&(ng+=' hlookat="'.concat(null==o?void 0:null===(nc=o.config)||void 0===nc?void 0:null===(na=nc.default_view)||void 0===na?void 0:na.x,'"')),(null==o?void 0:null===(nd=o.config)||void 0===nd?void 0:null===(nu=nd.default_view)||void 0===nu?void 0:nu.y)!==void 0&&(ng+=' vlookat="'.concat(null==o?void 0:null===(ns=o.config)||void 0===ns?void 0:null===(nv=ns.default_view)||void 0===nv?void 0:nv.y,'"')),(null==o?void 0:null===(nf=o.config)||void 0===nf?void 0:null===(np=nf.default_view)||void 0===np?void 0:np.zoom_lv)!==void 0&&(ng+=' fov="'.concat((null==o?void 0:null===(nh=o.config)||void 0===nh?void 0:nh.typeTransition)==="3d"?nw+30:nw,'"'))),{view:ng+=' fovmin="'.concat((null==o?void 0:null===(r=o.config)||void 0===r?void 0:null===(c=r.zoom_limit)||void 0===c?void 0:c.min)!==void 0?o.config.zoom_limit.min:60,'"')+' fovmax="\n          '.concat((null==o?void 0:null===(a=o.config)||void 0===a?void 0:null===(d=a.zoom_limit)||void 0===d?void 0:d.max)!==void 0?o.config.zoom_limit.max:150,'"')+' limitview="range"'+' hlookatmin="'.concat((null==o?void 0:null===(u=o.config)||void 0===u?void 0:null===(s=u.limit_view)||void 0===s?void 0:s.left)!==void 0?null==o?void 0:null===(v=o.config)||void 0===v?void 0:v.limit_view.left:-180,'"')+' hlookatmax="'.concat((null==o?void 0:null===(f=o.config)||void 0===f?void 0:null===(p=f.limit_view)||void 0===p?void 0:p.right)!==void 0?null==o?void 0:null===(h=o.config)||void 0===h?void 0:h.limit_view.right:180,'"')+' vlookatmin="'.concat((null==o?void 0:null===(m=o.config)||void 0===m?void 0:null===(g=m.limit_view)||void 0===g?void 0:g.bottom)!==void 0?null==o?void 0:null===(w=o.config)||void 0===w?void 0:w.limit_view.bottom:90,'"')+' vlookatmax="'.concat((null==o?void 0:null===(y=o.config)||void 0===y?void 0:null===(b=y.limit_view)||void 0===b?void 0:b.top)!==void 0?null==o?void 0:null===(x=o.config)||void 0===x?void 0:x.limit_view.top:-90,'"')+" />"+"".concat((null===(_=o.configPlugin)||void 0===_?void 0:null===(k=_.lensflare)||void 0===k?void 0:k.enabled)&&(null===(C=o.configPlugin)||void 0===C?void 0:null===(A=C.lensflare)||void 0===A?void 0:A.ath)&&(null===(S=o.configPlugin)||void 0===S?void 0:null===(P=S.lensflare)||void 0===P?void 0:P.atv)?'<include url="%$mypath%/core/skin/lensflare.xml" />\n      <lensflare_settings editor="false" ath="'.concat((null===(Z=o.configPlugin)||void 0===Z?void 0:null===(E=Z.lensflare)||void 0===E?void 0:E.ath)!==void 0?null===(T=o.configPlugin)||void 0===T?void 0:null===(I=T.lensflare)||void 0===I?void 0:I.ath:null===(z=j.$i.lensflare)||void 0===z?void 0:z.ath,'" atv="').concat((null===(M=o.configPlugin)||void 0===M?void 0:null===(F=M.lensflare)||void 0===F?void 0:F.atv)!==void 0?null===(R=o.configPlugin)||void 0===R?void 0:null===(N=R.lensflare)||void 0===N?void 0:N.atv:null===(L=j.$i.lensflare)||void 0===L?void 0:L.atv,'" sun="').concat((null===(H=o.configPlugin)||void 0===H?void 0:null===(O=H.lensflare)||void 0===O?void 0:O.sun)!==void 0?null===(D=o.configPlugin)||void 0===D?void 0:null===(W=D.lensflare)||void 0===W?void 0:W.sun:null===(G=j.$i.lensflare)||void 0===G?void 0:G.sun,'" glare="').concat((null===(U=o.configPlugin)||void 0===U?void 0:null===(V=U.lensflare)||void 0===V?void 0:V.glare)!==void 0?null===(B=o.configPlugin)||void 0===B?void 0:null===(q=B.lensflare)||void 0===q?void 0:q.glare:null===(K=j.$i.lensflare)||void 0===K?void 0:K.glare,'" r_ring="').concat((null===(Y=o.configPlugin)||void 0===Y?void 0:null===($=Y.lensflare)||void 0===$?void 0:$.r_ring)!==void 0?null===(J=o.configPlugin)||void 0===J?void 0:null===(X=J.lensflare)||void 0===X?void 0:X.r_ring:null===(Q=j.$i.lensflare)||void 0===Q?void 0:Q.r_ring,'" exposure="true" exposure_bias="').concat((null===(nn=o.configPlugin)||void 0===nn?void 0:null===(no=nn.lensflare)||void 0===no?void 0:no.exposure_bias)!==void 0?null===(nt=o.configPlugin)||void 0===nt?void 0:null===(ni=nt.lensflare)||void 0===ni?void 0:ni.exposure_bias:null===(ne=j.$i.lensflare)||void 0===ne?void 0:ne.exposure_bias,'"/>\n      <plugin name="pp_light" devices="html5" keep="false"\n        url="%$mypath%/core/plugins/pp_light.js"\n        enabled="true"\n        exposure="0.0"\n        lights="0.0"\n        shadows="0.0"\n        filterrange="60.0"\n        masking="1.0"\n        quality="7"\n        order=""\n        phase="2"\n      />'):""),transition:nm,fovDefault:nw}},[o]),w=(0,s.useCallback)(function(n,o){if(i[t]&&o){var e="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");if("sound"===n.type){var l,r,c,a,d,u,s,v,f,p,h,m,g,w,y,b="sound1click(".concat(e,", ").concat((null==n?void 0:null===(l=n.config)||void 0===l?void 0:null===(r=l.sound)||void 0===r?void 0:null===(c=r.file)||void 0===c?void 0:c.src)||(null==n?void 0:null===(a=n.config)||void 0===a?void 0:null===(d=a.sound)||void 0===d?void 0:d.url),", ").concat((null==n?void 0:null===(u=n.config)||void 0===u?void 0:null===(s=u.sound)||void 0===s?void 0:s.action)||"pause",", ").concat((null===(v=n.config)||void 0===v?void 0:null===(f=v.sound)||void 0===f?void 0:f.volume)?(n.config.sound.volume/100).toFixed(1):.4,", ").concat((null==n?void 0:null===(p=n.config)||void 0===p?void 0:null===(h=p.sound)||void 0===h?void 0:h.reach)?n.config.sound.reach.toFixed(1):240,", ").concat((null==n?void 0:null===(m=n.config)||void 0===m?void 0:null===(g=m.sound)||void 0===g?void 0:g.auto_play)||!1,", ").concat((null==n?void 0:null===(w=n.config)||void 0===w?void 0:null===(y=w.sound)||void 0===y?void 0:y.loop)||!1,")");i[t].call(b)}else"instructor"===n.type&&(i[t].call("hotspot[".concat(e,"].togglepause()")),i[t].set("hotspot['".concat(e,"'].muted"),!o))}},[i,t]),b=(0,s.useCallback)(function(n){var o=i[t],e="nadirlogo";o.set("hotspot['".concat(e,"'].ath"),0),o.set("hotspot['".concat(e,"'].atv"),90),o.set("hotspot['".concat(e,"'].zoom"),!1),o.set("hotspot['".concat(e,"'].rotate"),0),o.set("hotspot['".concat(e,"'].scale"),(null==n?void 0:n.scale)||1),o.set("hotspot['".concat(e,"'].rotatewithview"),"true"),o.set("hotspot['".concat(e,"'].distorted"),!0),o.set("hotspot['".concat(e,"'].url"),(null==n?void 0:n.src)||""),o.set("hotspot['".concat(e,"'].visible"),!!((null==n?void 0:n.isEnabled)&&(null==n?void 0:n.src))),(null==n?void 0:n.link)&&o.set("hotspot['".concat(e,"'].onclick"),function(){window.open(null==n?void 0:n.link,"_blank")}),(null==n?void 0:n.isEnabled)&&(null==n?void 0:n.src)&&o.call("addhotspot('".concat(e,"')"))},[i,t]),x=(0,s.useCallback)(function(){i[t].set("view.fov",150),i[t].set("view.fovmin",1),i[t].set("view.fovmax",179),i[t].set("view.hlookatmin",-180),i[t].set("view.hlookatmax",180),i[t].set("view.vlookatmin",-90),i[t].set("view.vlookatmax",90),i[t].set("view.vlookat",60),i[t].set("view.hlookat",-60),i[t].set("view.stereographic",!0),i[t].set("view.fisheye",1),i[t].set("display.flash10","off"),i[t].set("display.detail",24),i[t].set("view.fovtype","VFOV"),i[t].set("view.limitview","lookat"),setTimeout(function(){var n,e,l,r,c,a,d,u,s;(null==o?void 0:null===(n=o.config)||void 0===n?void 0:n.isLittlePlanet)&&(i[t].call("normalview(".concat((null==o?void 0:null===(e=o.config)||void 0===e?void 0:null===(l=e.default_view)||void 0===l?void 0:l.x)||0,", ").concat((null==o?void 0:null===(r=o.config)||void 0===r?void 0:null===(c=r.default_view)||void 0===c?void 0:c.y)||0,", ").concat((null==o?void 0:null===(a=o.config)||void 0===a?void 0:null===(d=a.default_view)||void 0===d?void 0:d.zoom_lv)||90,", ").concat(null==o?void 0:null===(u=o.config)||void 0===u?void 0:u.timeTransitionLittlePlanet,")")),setTimeout(function(){var n,e,l,r,c,a,d,u,s,v,f,p,h,m,g,w;i[t].set("view.fovmin",(null==o?void 0:null===(n=o.config)||void 0===n?void 0:null===(e=n.zoom_limit)||void 0===e?void 0:e.min)!==void 0?o.config.zoom_limit.min:60),i[t].set("view.fovmax",(null==o?void 0:null===(l=o.config)||void 0===l?void 0:null===(r=l.zoom_limit)||void 0===r?void 0:r.max)!==void 0?o.config.zoom_limit.max:150),i[t].set("view.hlookatmin",(null==o?void 0:null===(c=o.config)||void 0===c?void 0:null===(a=c.limit_view)||void 0===a?void 0:a.left)!==void 0?null==o?void 0:null===(d=o.config)||void 0===d?void 0:d.limit_view.left:-180),i[t].set("view.hlookatmax",(null==o?void 0:null===(u=o.config)||void 0===u?void 0:null===(s=u.limit_view)||void 0===s?void 0:s.right)!==void 0?null==o?void 0:null===(v=o.config)||void 0===v?void 0:v.limit_view.right:180),i[t].set("view.vlookatmin",(null==o?void 0:null===(f=o.config)||void 0===f?void 0:null===(p=f.limit_view)||void 0===p?void 0:p.bottom)!==void 0?null==o?void 0:null===(h=o.config)||void 0===h?void 0:h.limit_view.bottom:90),i[t].set("view.vlookatmax",(null==o?void 0:null===(m=o.config)||void 0===m?void 0:null===(g=m.limit_view)||void 0===g?void 0:g.top)!==void 0?null==o?void 0:null===(w=o.config)||void 0===w?void 0:w.limit_view.top:-90)},(null==o?void 0:null===(s=o.config)||void 0===s?void 0:s.timeTransitionLittlePlanet)*1e3+100))},200)},[i,t,o]),_=(0,s.useCallback)(function(n){var o=i[t],e="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon","-vrmode");return o.set("hotspot['".concat(e,"'].name"),e),o.set("hotspot['".concat(e,"'].url"),"point"===n.type?"".concat("/static","/static/point.png"):"image"===n.type?"".concat("/static","/static/image.png"):"sound"===n.type?"".concat("/static","/static/sound.png"):"".concat("/static","/static/video.png")),o.set("hotspot['".concat(e,"'].renderer"),"webgl"),o.set("hotspot['".concat(e,"'].width"),"32"),o.set("hotspot['".concat(e,"'].height"),"32"),o.set("hotspot['".concat(e,"'].imagewidth"),"24"),o.set("hotspot['".concat(e,"'].imageheight"),"24"),o.set("hotspot['".concat(e,"'].depth"),"1000"),o.set("hotspot['".concat(e,"'].distorted"),!0),o.set("hotspot['".concat(e,"'].scale"),1),o.set("hotspot['".concat(e,"'].flying"),.1),o.set("hotspot['".concat(e,"'].edge"),"center"),o.set("hotspot['".concat(e,"'].ath"),+n.ath),o.set("hotspot['".concat(e,"'].atv"),+n.atv),o.set("hotspot['".concat(e,"'].onover"),"tween(scale,1.5,easeOutExpo,0.2);"),o.set("hotspot['".concat(e,"'].onout"),"tween(scale,1,easeOutExpo,0.2);"),o.set("hotspot['".concat(e,"'].visible"),!1),o.set("hotspot['".concat(e,"'].enabled"),!1),o.set("hotspot['".concat(e,"'].align"),"center"),{krpano:o,name:e}},[i,t]),k=(0,s.useCallback)(function(n){var o,e,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=i[t],c="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");return r.set("hotspot['".concat(c,"'].styleType"),null===(o=n.config)||void 0===o?void 0:null===(e=o.style)||void 0===e?void 0:e.type),r.set("hotspot['".concat(c,"'].name"),c),r.set("hotspot['".concat(c,"'].zoom"),!!l),r.set("hotspot['".concat(c,"'].capture"),!1),r.set("hotspot['".concat(c,"'].onover"),function(){r.set("hotspot['".concat(c,"'].zorder"),4003)}),r.set("hotspot['".concat(c,"'].onout"),function(){r.set("hotspot['".concat(c,"'].zorder"),4002)}),{name:c,krpano:r,onConfigHotspotMedia:function(){r.set("hotspot['".concat(c,"'].distorted"),"true"),r.set("hotspot['".concat(c,"'].rx"),"0"),r.set("hotspot['".concat(c,"'].ry"),"0"),r.set("hotspot['".concat(c,"'].rz"),"0"),r.set("hotspot['".concat(c,"'].cursor"),"unset"),r.set("hotspot['".concat(c,"'].capture"),!1),r.set("hotspot['".concat(c,"'].usecontentsize"),"true")},onConfigHotspotPolygon:function(o){r.set("hotspot['".concat(c,"'].renderer"),"webgl");var t,i,e,l,a,d=n.polygon_config,u=(0,h.JF)((null===(t=d.properties)||void 0===t?void 0:t.fillColor)||(null==o?void 0:o.fillColor)||j.qi.fillColor),s=(0,h.JF)((null===(i=d.properties)||void 0===i?void 0:i.fillColorHover)||(null==o?void 0:o.fillColorHover)||j.qi.fillColorHover),v=(0,h.JF)((null===(e=d.properties)||void 0===e?void 0:e.borderColor)||(null==o?void 0:o.borderColor)||j.qi.borderColor),f=(0,h.JF)((null===(l=d.properties)||void 0===l?void 0:l.borderColorHover)||(null==o?void 0:o.borderColorHover)||j.qi.borderColorHover);r.set("hotspot[".concat(c,"].fillcolor"),u.color.replace("#","0x")),r.set("hotspot[".concat(c,"].bordercolor"),v.color.replace("#","0x")),r.set("hotspot[".concat(c,"].borderwidth"),(null===(a=d.properties)||void 0===a?void 0:a.borderWidth)||3),r.set("hotspot[".concat(c,"].fillalpha"),u.alpha),r.set("hotspot[".concat(c,"].borderalpha"),v.alpha),r.set("hotspot[".concat(c,"].tooltip"),n.title),r.set("hotspot[".concat(c,"].zorder"),1),r.set("hotspot[".concat(c,"].onhover"),function(){r.call("tween(hotspot[".concat(c,"].fillcolor, ").concat(s.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(c,"].fillalpha, ").concat(s.alpha,", 0.2);")),r.call("tween(hotspot[".concat(c,"].bordercolor, ").concat(f.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(c,"].borderalpha, ").concat(f.alpha,", 0.2);"))}),r.set("hotspot[".concat(c,"].onout"),function(){r.call("tween(hotspot[".concat(c,"].fillcolor, ").concat(u.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(c,"].fillalpha, ").concat(u.alpha,", 0.2);")),r.call("tween(hotspot[".concat(c,"].bordercolor, ").concat(v.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(c,"].borderalpha, ").concat(v.alpha,", 0.2);")),r.call("copy(layer[tooltip].html, );tween(layer[tooltip].alpha, 0.0, 0.25, default, set(layer[tooltip].visible,false), copy(layer[tooltip].x,mouse.stagex); copy(layer[tooltip].y,mouse.stagey); );")}),r.call("hotspot[".concat(c,"].loadstyle(poly_hotspot_text)"));for(var p=0;p<d.points.length;p+=1){var m=d.points[p];r.set("hotspot[".concat(c,"].point[").concat(p,"].ath"),m.ath),r.set("hotspot[".concat(c,"].point[").concat(p,"].atv"),m.atv)}},onConfigHotspotInstructor:function(o){r.set("hotspot['".concat(c,"'].url"),"%$mypath%/core/plugins/videoplayer.js"),r.set("hotspot['".concat(c,"'].videourl"),null===(t=n.config)||void 0===t?void 0:null===(i=t.instructor)||void 0===i?void 0:null===(e=i.media)||void 0===e?void 0:e.src),r.set("hotspot['".concat(c,"'].renderer"),""),r.set("hotspot['".concat(c,"'].distorted"),!0),r.set("hotspot['".concat(c,"'].zoom"),!1),r.set("hotspot['".concat(c,"'].autoresume"),!0),r.set("hotspot['".concat(c,"'].muted"),!o),o?r.set("hotspot['".concat(c,"'].pausedonstart"),(null===(l=n.config)||void 0===l?void 0:null===(a=l.instructor)||void 0===a?void 0:a.paused_on_start)!==void 0?null===(d=n.config)||void 0===d?void 0:null===(u=d.instructor)||void 0===u?void 0:u.paused_on_start:j.Cv.paused_on_start):r.set("hotspot['".concat(c,"'].pausedonstart"),!0),r.set("hotspot['".concat(c,"'].loop"),(null===(s=n.config)||void 0===s?void 0:null===(v=s.instructor)||void 0===v?void 0:v.loop)!==void 0?null===(f=n.config)||void 0===f?void 0:null===(p=f.instructor)||void 0===p?void 0:p.loop:j.Cv.loop),r.set("hotspot['".concat(c,"'].directionalsound"),(null===(m=n.config)||void 0===m?void 0:null===(g=m.instructor)||void 0===g?void 0:g.sound_360)!==void 0?null===(w=n.config)||void 0===w?void 0:null===(y=w.instructor)||void 0===y?void 0:y.sound_360:j.Cv.sound_360),r.set("hotspot['".concat(c,"'].volume"),(null===(b=n.config)||void 0===b?void 0:null===(x=b.instructor)||void 0===x?void 0:x.volume)!==void 0?null===(_=n.config)||void 0===_?void 0:null===(k=_.instructor)||void 0===k?void 0:k.volume:j.Cv.volume);var t,i,e,l,a,d,u,s,v,f,p,m,g,w,y,b,x,_,k,C,A,S,P,Z,E,T,I,z,M,F,R,N,L,H,O,D,W,G,U,V=(0,h.JF)((null===(C=n.config)||void 0===C?void 0:null===(A=C.instructor)||void 0===A?void 0:A.mask)!==void 0?null===(S=n.config)||void 0===S?void 0:null===(P=S.instructor)||void 0===P?void 0:P.mask:j.Cv.mask);r.set("hotspot[".concat(c,"].chromakey"),"".concat(V.color.replace("#","0x"),"|").concat((null===(Z=n.config)||void 0===Z?void 0:null===(E=Z.instructor)||void 0===E?void 0:E.smoothing)!==void 0?null===(T=n.config)||void 0===T?void 0:null===(I=T.instructor)||void 0===I?void 0:I.smoothing:j.Cv.smoothing,"|").concat((null===(z=n.config)||void 0===z?void 0:null===(M=z.instructor)||void 0===M?void 0:M.threshold)!==void 0?null===(F=n.config)||void 0===F?void 0:null===(R=F.instructor)||void 0===R?void 0:R.threshold:j.Cv.threshold));var B=(null===(N=n.config)||void 0===N?void 0:null===(L=N.instructor)||void 0===L?void 0:L.width)!==void 0?null===(H=n.config)||void 0===H?void 0:null===(O=H.instructor)||void 0===O?void 0:O.width:j.Cv.width;r.set("hotspot['".concat(c,"'].width"),B);var q=(null===(D=n.config)||void 0===D?void 0:null===(W=D.instructor)||void 0===W?void 0:W.height)!==void 0?null===(G=n.config)||void 0===G?void 0:null===(U=G.instructor)||void 0===U?void 0:U.height:j.Cv.height;r.set("hotspot['".concat(c,"'].height"),q)}}},[t,i]),C=(0,s.useCallback)(function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=i[t],l="commentscene-".concat(n.id,"-").concat(t).concat(o?"-temporary":"");return e.set("hotspot['".concat(l,"'].name"),l),e.set("hotspot['".concat(l,"'].capture"),!1),e.set("hotspot['".concat(l,"'].zoom"),!0),e.set("hotspot['".concat(l,"'].onover"),function(){e.set("hotspot['".concat(l,"'].zorder"),4003)}),e.set("hotspot['".concat(l,"'].onout"),function(){e.set("hotspot['".concat(l,"'].zorder"),4002)}),e.set("hotspot['".concat(l,"'].ath"),+n.ath),e.set("hotspot['".concat(l,"'].atv"),+n.atv),e.set("hotspot['".concat(l,"'].url"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUCB1jYAACAAAFAAGNu5vzAAAAAElFTkSuQmCC"),e.set("hotspot['".concat(l,"'].renderer"),"css3d"),{krpano:e,name:l}},[i,t]);return(0,s.useMemo)(function(){return{sceneChilds:u,onRenderXmlKrpano:g,onTriggerChangeView:v,onTriggerChangeZoom:f,onTriggerSoundHotspot:w,onTriggerLoadCompleted:p,onAddHotspotNadirKrpano:b,onAddHotspotKrpanoUtils:k,onAddHotspotVRKrpanoUtils:_,onAddCommentSceneIconUtils:C,onApplyConfigLittlePlanetKrpano:x,onApplyConfigPluginKrpanoForScene:m}},[u,g,v,f,w,p,b,k,_,C,x,m])},z=u()(function(){return t.e(268).then(t.bind(t,80268))},{loadableGenerated:{webpack:function(){return[80268]}}}),M=h.sk?void 0:window,F=(0,s.forwardRef)(function(n,o){var t,i,e,d=n.scene,u=n.listScene,x=n.urlTour,_=n.divId,k=void 0===_?"container":_,C=n.krpanoId,A=void 0===C?"krpanoContainer":C,P=n.onClickHotspot,Z=n.onChangeAutoChangeScene,j=n.isLoaded,F=n.setIsLoaded,R=n.nadirConfig,N=n.children,L=n.styleContainer,H=n.isTurnOffFollowMode,O=void 0!==H&&H,D=n.onChangeScene,W=(0,s.useRef)(!1),G=(0,s.useRef)(!1),U=(0,s.useRef)(null),V=(0,s.useRef)(new Map([])),B=(0,s.useRef)(new Map([])),q=(0,s.useRef)(new Map([])),K=(0,v.v9)(w.CO),Y=(0,v.v9)(w.Yd),$=(0,v.v9)(w.FT),J=(0,v.v9)(w.p8),X=(0,v.v9)(w.iD),Q=(0,c.Z)((0,s.useState)(),2),nn=Q[0],no=Q[1],nt=(0,c.Z)((0,s.useState)(!1),2),ni=nt[0],ne=nt[1],nl=(0,c.Z)((0,y.gU)("state"),1)[0],nr=(0,b.d)(),nc=nr.onCreateCommentScene,na=nr.onUpdateCommentScene,nd=nr.onDeleteCommentScene,nu=(0,c.Z)((0,y.yG)("isShowDialogCreateCommentScene"),2)[1],ns=(0,c.Z)((0,y.yG)("commentSceneTemporary"),2)[1],nv=(0,c.Z)((0,y.yG)("commentSceneSelected"),2)[1],nf=I({scene:d,krpanoId:A}),np=nf.sceneChilds,nh=nf.onRenderXmlKrpano,nm=nf.onTriggerChangeView,ng=nf.onTriggerChangeZoom,nw=nf.onTriggerSoundHotspot,ny=nf.onTriggerLoadCompleted,nb=nf.onAddHotspotNadirKrpano,nx=nf.onAddHotspotKrpanoUtils,n_=nf.onAddHotspotVRKrpanoUtils,nk=nf.onAddCommentSceneIconUtils,nC=nf.onApplyConfigLittlePlanetKrpano,nA=nf.onApplyConfigPluginKrpanoForScene;(0,s.useEffect)(function(){G.current=ni},[ni]),(0,s.useEffect)(function(){return function(){ne(!1),V.current=new Map([]),q.current=new Map([])}},[null==d?void 0:d.id]);var nS=(0,s.useCallback)(function(n){if(n&&n.media&&nn){var o=nh(),t=o.transition,i=o.view,e=o.fovDefault;nn.loadScene(x,null,n.media.krpano_xml||null,t,i,n.mode||"",np,n.configStaging||{},e)}},[nn,nh,x,np]),nP=(0,s.useCallback)((t=(0,f.Z)(function(n){var o,t,i;return(0,p.__generator)(this,function(e){return t=(o=n_(n)).krpano,i=o.name,t.set("hotspot['".concat(i,"'].onclick"),function(){"point"===n.type?P({hotspot:n}):"sound"===n.type?nw(n,G.current):"image"===n.type?t.call('open_galleries("'.concat(i,'", "').concat(n.config.image.galleries.map(function(n){return n.src}).join(","),'")')):"video"===n.type&&t.call('open_video("'.concat(i,'", "').concat(n.config.video.url,'")'))}),t.call("addhotspot('".concat(i,"')")),[2,new Promise(function(n){return n(!0)})]})}),function(n){return t.apply(this,arguments)}),[n_,P,nw]),nZ=(0,s.useCallback)((i=(0,f.Z)(function(n){var o,t,i,e,l,r,c,d,s,v,h=arguments;function w(){return y.apply(this,arguments)}function y(){return(y=(0,f.Z)(function(){var o,t,l,r,c;return(0,p.__generator)(this,function(d){return o=e.get("hotspot[".concat(i,"]")),t=(0,a.jsx)("div",{id:i,className:"inline-flex ".concat((null==$?void 0:$.lockHotspot)?"absolute-center":"")}),o.sprite.innerHTML=(0,m.Dq)(t).toString(),(l=document.getElementById(i))&&(0,g.createRoot)(l).render("media"===n.type?(0,a.jsx)(E,{ref:function(o){var t,i;o&&(null===(t=n.config)||void 0===t?void 0:null===(i=t.media)||void 0===i?void 0:i.type)==="media-video"&&!q.current.get(n.id)&&q.current.set(n.id,o)},onClickHotspot:P,isSoundOn:G.current,hotspot:n,listPost:Y}):(0,a.jsx)(z,{onClick:function(){var o,t,l,r,c;(null===(o=n.config)||void 0===o?void 0:o.sound)!==void 0?nw(n,G.current):"point"===n.type&&(null===(t=n.config)||void 0===t?void 0:null===(l=t.point)||void 0===l?void 0:l.isTransition)&&(null===(r=n.config)||void 0===r?void 0:null===(c=r.point)||void 0===c?void 0:c.typeTransition)==="3d"?(e.call("transition_click(".concat(i,")")),setTimeout(function(){P({hotspot:n})},100)):P({hotspot:n})},isHidden:"sound"===n.type&&!(null===(r=n.config)||void 0===r?void 0:null===(c=r.sound)||void 0===c?void 0:c.action),isHideTitleGlobal:!!(null==$?void 0:$.hideTitle),isHidePreviewGlobal:!!(null==$?void 0:$.hidePreview),isHideTitleOnTopGlobal:!!(null==$?void 0:$.hideTitleOnTopHotspot),bgColorDefault:null==$?void 0:$.bgColor,iconColorDefault:null==$?void 0:$.iconColor,hotspot:n,listScene:u,listPost:Y,onChangePopover:function(n){return Z(!n)}})),[2]})})).apply(this,arguments)}return(0,p.__generator)(this,function(a){switch(a.label){case 0:if(o=h.length>1&&void 0!==h[1]&&h[1],i=(t=nx(n,!!(null==$?void 0:$.keepHotspotPositionWhenZooming))).name,e=t.krpano,l=t.onConfigHotspotMedia,r=t.onConfigHotspotPolygon,c=t.onConfigHotspotInstructor,!(n.polygon&&n.polygon_config))return[3,1];return r(J),e.set("hotspot['".concat(i,"'].onclick"),function(){e.get("webvr.isenabled")?"point"===n.type?P({hotspot:n}):"image"===n.type?e.call('open_galleries("'.concat(i,'", "').concat(n.config.image.galleries.map(function(n){return n.src}),'")')):"video"===n.type&&e.call('open_video("'.concat(i,'", "').concat(n.config.video.url,'")')):P({hotspot:n})}),[3,4];case 1:if(n.polygon)return[3,4];return e.set("hotspot['".concat(i,"'].ath"),+n.ath),e.set("hotspot['".concat(i,"'].atv"),+n.atv),"chevron"===n.type&&(e.set("hotspot['".concat(i,"'].style"),"skin_hotspotstyle"),e.set("hotspot['".concat(i,"'].onclick"),function(){var o,t,l,r;(null===(o=n.config)||void 0===o?void 0:null===(t=o.chevron)||void 0===t?void 0:t.isTransition)&&(null===(l=n.config)||void 0===l?void 0:null===(r=l.chevron)||void 0===r?void 0:r.typeTransition)==="3d"?(e.call("transition_click(".concat(i,")")),setTimeout(function(){P({hotspot:n})},100)):P({hotspot:n})})),"media"===n.type&&l(),"instructor"===n.type&&(null===(d=n.config)||void 0===d?void 0:null===(s=d.instructor)||void 0===s?void 0:null===(v=s.media)||void 0===v?void 0:v.src)?(c(G.current),e.set("hotspot['".concat(i,"'].onclick"),function(){nw(n,G.current)})):(e.set("hotspot['".concat(i,"'].url"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUCB1jYAACAAAFAAGNu5vzAAAAAElFTkSuQmCC"),e.set("hotspot['".concat(i,"'].renderer"),"css3d")),[4,e.set("hotspot['".concat(i,"'].onloaded"),(0,f.Z)(function(){return(0,p.__generator)(this,function(o){return"chevron"!==n.type&&"instructor"!==n.type&&w(),[2]})}))];case 2:if(a.sent(),!("point"===n.type||"video"===n.type&&n.config.video.url.endsWith(".mp4")||"sound"===n.type&&n.config.sound.action||"image"===n.type))return[3,4];return[4,nP(n)];case 3:a.sent(),a.label=4;case 4:return o?w():e.call("addhotspot('".concat(i,"')")),[2,new Promise(function(n){return n(!0)})]}})}),function(n){return i.apply(this,arguments)}),[Y,u,P,$,nP,nw,Z,nx,J]),nE=(0,s.useCallback)((e=(0,f.Z)(function(n,o,t){var i,e,c,d,u;return(0,p.__generator)(this,function(s){switch(s.label){case 0:if(i=n.get("hotspot[".concat(o,"]")),t.isOwnerTour&&n.set("hotspot['".concat(o,"'].onDragend"),function(){var i={ath:n.get("hotspot['".concat(o,"'].ath")),atv:n.get("hotspot['".concat(o,"'].atv"))};1e-4>Math.abs(Math.abs(t.ath)-Math.abs(i.ath))&&1e-4>Math.abs(Math.abs(t.atv)-Math.abs(i.atv))||na((0,r.Z)((0,l.Z)({},t,i),{message:void 0,isResolved:void 0,scene_id:t.scene}))}),n.set("hotspot['".concat(o,"'].onclick"),function(){nv(t)}),!(e=document.getElementById(o))||(V.current.size&&V.current.get(t.id)&&V.current.get(t.id).onClose(),!B.current.size||!(c=B.current.get("".concat(t.id,"_root")))))return[3,2];return[4,c.unmount()];case 1:s.sent(),s.label=2;case 2:return d=(0,a.jsx)("div",{id:o,className:"inline-flex"}),i.sprite.innerHTML=(0,m.Dq)(d).toString(),(e=document.getElementById(o))&&(u=(0,g.createRoot)(e),B.current.set("".concat(t.id,"_root"),u),u.render((0,a.jsx)(S,{ref:function(n){n&&V.current.set(t.id,n)},commentScene:t,onCreateCommentScene:nc,onUpdateCommentScene:na,onDeleteCommentScene:nd}))),[2]}})}),function(n,o,t){return e.apply(this,arguments)}),[nv,nc,nd,na]),nT=(0,s.useCallback)(function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=nk(n),i=t.krpano,e=t.name;n.isOwnerTour&&i.set("hotspot['".concat(e,"'].ondown"),"draghotspot()"),i.set("hotspot['".concat(e,"'].onloaded"),function(){nE(i,e,n)}),o?nE(i,e,n):i.call("addhotspot('".concat(e,"')"))},[nE,nk]),nj=(0,s.useCallback)(function(n){return M[A].call("removehotspot('commentscene-".concat(n,"-").concat(A,"')"))},[A]),nI=(0,s.useCallback)(function(n){return nT(n,!0)},[nT]),nz=(0,h.Ds)(function(){return nm()},150),nM=(0,h.Ds)(function(){return ng()},150),nF=(0,s.useCallback)(function(){var n=M[A].get("sceneId");n&&D(n)},[A,D]),nR=(0,s.useCallback)((0,f.Z)(function(){var n,o;return(0,p.__generator)(this,function(t){switch(t.label){case 0:if(!(d&&!W.current))return[3,5];if(nA(),(null==d?void 0:null===(n=d.config)||void 0===n?void 0:n.isLittlePlanet)&&K&&nC(),ny(O,X.mode||"drag"),nb(R),!(null==d?void 0:d.hotspots))return[3,4];o=0,t.label=1;case 1:if(!(o<d.hotspots.length))return[3,4];return[4,nZ(d.hotspots[o])];case 2:t.sent(),t.label=3;case 3:return o++,[3,1];case 4:M[A].call("hide_hotspots_no_vr()"),M[A].call("garrows_init()"),W.current=!0,F(!0),t.label=5;case 5:return[2]}})}),[d,A,R,F,K,nZ,O,ny,X,nb,nC,nA]),nN=(0,s.useCallback)(function(){var n=M[A].get("mouse.clickx"),o=M[A].get("mouse.clicky"),t=M[A].screentosphere(n,o);ns({id:(0,h.D9)(),ath:t.x,atv:t.y,message:"",scene:d.id,scene_id:d.id}),nu(!0)},[d,A,ns,nu]);return(0,s.useImperativeHandle)(o,function(){return{getContainer:function(){return U.current},viewPlanet:function(){M[A].call("cm_littleplanet_view")},viewNormal:function(){M[A].call("cm_normal_view")},viewMirrorBall:function(){M[A].call("mirror_ball_view")},viewFullscreen:function(){var n,o,t;(n=document).fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||n.msFullscreenElement?(o=document).exitFullscreen?o.exitFullscreen():o.msExitFullscreen?o.msExitFullscreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.mozCancelFullScreen&&o.mozCancelFullScreen():(t=document.body).requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():(0,h.lR)("error","Your browser does not support fullscreen mode")},viewWebvr:function(){M[A].call("webvr.enterVR()")},toggleGyro:function(){M[A].call("toggleGyroscope()")},startAutoRotate:function(n){var o=n.speed,t=n.wait_time;M[A].call("startrotation(".concat(void 0===o?10:o,", ").concat(void 0===t?20:t,")"))},stopAutoRotate:function(){M[A].call("stoprotation")},toLeft:function(){M[A].call("set(hlookat_moveforce,-0.75)")},toRight:function(){M[A].call("set(hlookat_moveforce,+0.75)")},stopToHorizontal:function(){M[A].call("set(hlookat_moveforce,0)")},toUp:function(){M[A].call("set(vlookat_moveforce,-0.75)")},toDown:function(){M[A].call("set(vlookat_moveforce,+0.75)")},stopToVertical:function(){M[A].call("set(vlookat_moveforce,0)")},removeAllChevronHotspot:function(n){n.filter(function(n){return"chevron"===n.type}).forEach(function(n){var o="hotspot-".concat(n.id,"-").concat(A,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");M[A].call("removenavigationelements(".concat(o,")"))})},triggerSound:function(){ne(!0)},destroySound:function(){M[A]&&M[A].call("destroy_sound()")},muteAllSound:function(n){var o;null==n||null===(o=n.hotspots)||void 0===o||o.forEach(function(n){var o,t,i,e,l,r,c,a,d="hotspot-".concat(n.id,"-").concat(A,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");"sound"===n.type&&(null===(o=n.config)||void 0===o?void 0:o.sound)?M[A].call("toggle_mute_sound(".concat("".concat(d),", true)")):"instructor"===n.type&&(null===(t=n.config)||void 0===t?void 0:null===(i=t.instructor)||void 0===i?void 0:i.media)?M[A].set("hotspot[".concat(d,"].muted"),!0):"media"===n.type&&(null===(e=n.config)||void 0===e?void 0:null===(l=e.media)||void 0===l?void 0:l.type)==="media-video"&&(null==n?void 0:null===(r=n.config)||void 0===r?void 0:null===(c=r.media)||void 0===c?void 0:null===(a=c.media)||void 0===a?void 0:a.src)&&q.current.get(n.id).onToggleMute(!0)})},unmuteAllSound:function(n){var o;null==n||null===(o=n.hotspots)||void 0===o||o.forEach(function(n){var o,t,i,e,l,r,c,a,d="hotspot-".concat(n.id,"-").concat(A,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");"sound"===n.type&&(null===(o=n.config)||void 0===o?void 0:o.sound)?M[A].call("toggle_mute_sound(".concat("".concat(d),", false)")):"instructor"===n.type&&(null===(t=n.config)||void 0===t?void 0:null===(i=t.instructor)||void 0===i?void 0:i.media)?M[A].set("hotspot[".concat(d,"].muted"),!1):"media"===n.type&&(null===(e=n.config)||void 0===e?void 0:null===(l=e.media)||void 0===l?void 0:l.type)==="media-video"&&(null==n?void 0:null===(r=n.config)||void 0===r?void 0:null===(c=r.media)||void 0===c?void 0:null===(a=c.media)||void 0===a?void 0:a.src)&&q.current.get(n.id).onToggleMute(!1)})},get:function(n){M[A].get(n)},set:function(n,o){M[A].set(n,o)},call:function(n){M[A].call(n)},onAddCommentScene:function(n){nT(n)},onRemoveCommentScene:function(n){nj(n)},onReplaceCommentScene:function(n){nI(n)},focusOnCommentScene:function(n,o){var t="lookat(".concat(n.ath,", ").concat(n.atv,", null, null, true, true, ").concat(o(),")");M[A].call(t)},loadXml:function(n){M[A].call("load_menu_vr(".concat(n,")"))}}},[A,nT,nj,nI]),(0,s.useEffect)(function(){!nn&&A&&no((0,T.Z)(A))},[nn,A]),(0,s.useEffect)(function(){nn&&nn.init(k,"".concat("/static","/core/tour.xml"),{mypath:"/static"})},[nn,k]),(0,s.useEffect)(function(){nn&&x&&void 0!==nl.isVisiblePopupIntro&&(F(!1),W.current=!1,d&&!nl.isVisiblePopupIntro&&nS(d))},[null==d?void 0:d.id,nn,nl.isVisiblePopupIntro]),(0,s.useEffect)(function(){return M[A]&&nn&&(M[A].addEventListener("onloadcomplete",nR),M[A].addEventListener("onviewchange",nz),M[A].addEventListener("onmousewheel",nM),M[A].addEventListener("onnewpanovr",nF),M[A].addEventListener("ondoubleclick",nN)),function(){M[A]&&(M[A].removeEventListener("onloadcomplete",nR),M[A].removeEventListener("onviewchange",nz),M[A].removeEventListener("onmousewheel",nM),M[A].removeEventListener("ondoubleclick",nN),M[A].removeEventListener("onnewpanovr",nF),ne(!1))}},[nn,d]),(0,s.useEffect)(function(){var n;j&&ni&&(null==d||null===(n=d.hotspots)||void 0===n||n.forEach(function(n){var o,t,i,e,l,r,c,a,d,u,s;"sound"===n.type&&(null===(o=n.config)||void 0===o?void 0:o.sound)!==void 0&&(null===(t=n.config)||void 0===t?void 0:null===(i=t.sound)||void 0===i?void 0:i.auto_play)||"instructor"===n.type&&(null===(e=n.config)||void 0===e?void 0:null===(l=e.instructor)||void 0===l?void 0:l.media)&&!(null===(r=n.config)||void 0===r?void 0:null===(c=r.instructor)||void 0===c?void 0:c.paused_on_start)?nw(n,G.current):"media"===n.type&&(null===(a=n.config)||void 0===a?void 0:null===(d=a.media)||void 0===d?void 0:d.type)==="media-video"&&(null==n?void 0:null===(u=n.config)||void 0===u?void 0:null===(s=u.media)||void 0===s?void 0:s.volume)&&q.current.get(n.id)&&q.current.get(n.id).onToggleMute(!1)}))},[j,ni]),(0,a.jsx)("div",{id:k,ref:U,style:(0,l.Z)({},{width:"100%",height:"250px"},void 0===L?{height:"100%"}:L),children:N})}),R=(0,s.memo)(F),N=t(79505),L=t(36323),H=t(7297);function O(){var n=(0,H.Z)(["\n  width: 100%;\n  position: relative;\n  height: 100%;\n  z-index: 1;\n\n  .--pane {\n    top: 0;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n  }\n  img {\n    user-select: none;\n  }\n  .--first-photo-container,\n  .--second-photo-container {\n    background: transparent;\n    > img {\n      width: 100%;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n  }\n  .--delimiter {\n    position: absolute;\n    height: 100%;\n    background: #fff;\n    width: 5px;\n    top: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .--delimiter-icon {\n    width: 25px;\n    height: 25px;\n    border-radius: 50%;\n    background: #fff;\n    cursor: col-resize;\n  }\n\n  .--size-fix-img {\n    width: 100%;\n    opacity: 0;\n  }\n"]);return O=function(){return n},n}var D=t(19521).ZP.div.withConfig({displayName:"styled__BeforeAfterSliderWrapper",componentId:"Panoee__sc-d3aad712-0"})(O());function W(n){var o,t,i=n.scenes,l=void 0===i?[]:i,r=n.firstPane,d=n.onVisible,u=n.classNames,v=n.nadirConfig,f=n.delimiterColor,p=n.withResizeFeel,h=n.mode,m=void 0===h?"slide":h,g=this,w=(0,s.useRef)(null),y=(0,s.useRef)(null),b=(0,c.Z)((0,s.useState)(null),2),x=b[0],_=b[1],k=(0,c.Z)((0,s.useState)(void 0),2),C=k[0],A=k[1],S=(0,c.Z)((0,s.useState)(e.DEFAULT),2),P=S[0],Z=S[1],E=(0,c.Z)((0,s.useState)({top:0,left:0}),2),T=E[0],j=E[1],I=(0,s.useMemo)(function(){return"split"===m?{width:100-(null==C?void 0:C.reduce(function(n,o){return n+o.width},0)),left:null==C?void 0:C.reduce(function(n,o){return n+o.width},0)}:{width:"100%",left:"0"}},[m,C]),z=(0,c.Z)((0,s.useState)(d&&Boolean(window.IntersectionObserver)?new IntersectionObserver(function(n){z&&d&&n.forEach(function(n){n.intersectionRatio>.95&&(z.disconnect(),d())})},{threshold:[0,.95]}):null),1)[0];(0,s.useEffect)(function(){z&&z.observe(w.current)},[z]),(0,s.useEffect)(function(){if(x){for(var n=[],o=Number(100/(l.length+1)),t=0;t<l.length;t+=1)if(0===t)n.push({width:o,left:0});else{var i=o*t;n.push({width:o,left:i})}A(n)}},[x,l]);var M=function(){w.current&&_(w.current.offsetWidth)};o=function(){Z(e.DEFAULT)},(0,s.useEffect)(function(){return M(),document.addEventListener("click",o),function(){document.removeEventListener("click",o)}},[o,M]);var F={backgroundColor:f},R={backgroundColor:f,right:0},N=function(){if(w.current){var n=w.current.getBoundingClientRect();j({top:n.top+window.pageYOffset,left:n.left+window.pageXOffset})}},H=function(n){N(),Z(e.MOVE),y.current||(y.current=[]),y.current.itemActive=n},O=function(n){if(P===e.MOVE&&x){var o=(n.pageX-T.left)/x*100;y.current.itemActive===C.length-1?A(function(n){return n.map(function(n,t){if(t===y.current.itemActive){var i={width:o-(C.map(function(n){return n.width||0}).reduce(function(n,o){return n+o},0)-n.width),left:n.left};if(i.width>5)return i}return n})}):A(function(n){return n.map(function(t,i){if(i===y.current.itemActive){y.current.totalWidthCurrentAndNextItem=t.width+n[i+1].width,y.current.totalWidthItemsLtCurrent=n.filter(function(n,o){return o<y.current.itemActive}).map(function(n){return n.width||0}).reduce(function(n,o){return n+o},0),y.current.currentWidthOld=t.width,y.current.currentWidthNew=0===y.current.itemActive?o:o-y.current.totalWidthItemsLtCurrent;var e={width:y.current.currentWidthNew,left:t.left};if(y.current.isUpdateNextItem=!1,e.width>5&&e.width<y.current.totalWidthCurrentAndNextItem-5)return y.current.isUpdateNextItem=!0,e}if(i===y.current.itemActive+1){var l={width:t.width+y.current.currentWidthOld-y.current.currentWidthNew,left:y.current.totalWidthItemsLtCurrent+y.current.currentWidthNew};if(y.current.isUpdateNextItem)return l}return t})})}};return t=void 0===p||p,(0,s.useEffect)(function(){return t&&window.addEventListener("resize",M),function(){window.removeEventListener("resize",M)}},[M,t]),(0,a.jsx)(D,{ref:w,className:u,onMouseMove:function(n){n.preventDefault(),O(n)},onTouchMove:function(n){O(n.touches[0])},children:C&&Boolean(x)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"--pane --first-photo-container",style:{width:"".concat(I.width,"%"),left:"".concat(I.left,"%"),zIndex:0},children:r}),l.map(function(n,o){var t,i,e;return(0,a.jsxs)("div",{className:"--pane --second-photo-container",style:{width:"".concat((null===(t=C[o])||void 0===t?void 0:t.width)||0,"%"),left:"".concat((null===(i=C[o])||void 0===i?void 0:i.left)||0,"%"),zIndex:l.length-o},children:[(0,a.jsx)("div",{style:{width:"100%",height:"100%",overflow:"hidden",position:"relative"},children:(0,a.jsx)(L.Z,{urlTour:n.urlTour||"",scene:n||void 0,krpanoId:"krpanoView_".concat(o),divId:"krpanoContainer_".concat(o),styleContainer:{height:"100%",position:"absolute",left:"slide"===m?"calc(-1vw * ".concat(null===(e=C[o])||void 0===e?void 0:e.left,")"):"0",top:0,width:"slide"===m?"100vw":"100%"},nadirConfig:v})}),(0,a.jsx)("div",{className:"--delimiter",style:R,children:"slide"===m&&(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"--delimiter-icon",onMouseDown:H.bind(g,o),onTouchStart:H.bind(g,o),style:F})})})]},n.id)})]})})}(i=e||(e={})).MOVE="move",i.DEFAULT="default";var G=t(94178),U=u()(function(){return t.e(275).then(t.bind(t,60275))},{loadableGenerated:{webpack:function(){return[60275]}}}),V=u()(function(){return t.e(6269).then(t.bind(t,36269))},{loadableGenerated:{webpack:function(){return[36269]}}}),B=u()(function(){return t.e(7057).then(t.bind(t,97057))},{loadableGenerated:{webpack:function(){return[97057]}}}),q=u()(function(){return t.e(9767).then(t.bind(t,39767))},{loadableGenerated:{webpack:function(){return[39767]}}}),K=u()(function(){return t.e(7371).then(t.bind(t,27371))},{loadableGenerated:{webpack:function(){return[27371]}}}),Y=u()(function(){return t.e(2154).then(t.bind(t,32154))},{loadableGenerated:{webpack:function(){return[32154]}}}),$=(0,s.memo)(function(n){var o,t,i,e,d=n.onChangeScene,u=n.onNextScene,f=n.children,p=(0,v.v9)(w.U9),h=(0,v.v9)(w.oo),m=(0,v.v9)(w.AA),g=(0,v.v9)(w.Y2),b=(0,v.v9)(w.us),x=(0,v.v9)(w.hd),_=(0,v.v9)(w.JB),k=(0,s.useRef)(!1),C=(0,s.useRef)(null),A=(0,c.Z)((0,s.useState)(null),2),S=A[0],P=A[1],Z=(0,s.useMemo)(function(){var n,o,t;return(null==g?void 0:null===(n=g.media)||void 0===n?void 0:n.src_preview)||(null==g?void 0:null===(o=g.media)||void 0===o?void 0:o.src_thumb)||(null==g?void 0:null===(t=g.media)||void 0===t?void 0:t.src)},[g]),E=(0,s.useMemo)(function(){var n;return(null==g?void 0:g.mode)==="staging"&&(null==g?void 0:g.staging.length)&&(null==g?void 0:g.staging.filter(function(n){return n.media}).length)&&!(null==g?void 0:null===(n=g.configStaging)||void 0===n?void 0:n.modeDisplay)},[g]),T=(0,s.useMemo)(function(){var n;return(((null==g?void 0:g.mode)==="staging"&&(null==g?void 0:null===(n=g.configStaging)||void 0===n?void 0:n.modeDisplay)?null==g?void 0:g.staging:[])||[]).filter(function(n){return n.media}).map(function(n){var o,t,i;return(0,r.Z)((0,l.Z)({},n),{urlTour:(null==n?void 0:null===(o=n.media)||void 0===o?void 0:o.src_preview)||(null==n?void 0:null===(t=n.media)||void 0===t?void 0:t.src_thumb)||(null==n?void 0:null===(i=n.media)||void 0===i?void 0:i.src),config:null==g?void 0:g.config,configPlugin:null==g?void 0:g.configPlugin})})},[g]),I=(0,c.Z)((0,y.gU)("state"),2),z=I[0],M=I[1],F=(0,c.Z)((0,y.yG)("krpanoRef"),2)[1],L=(0,N.Q)({krpanoRef:S}),H=L.isShowIconMap,O=L.isShowIconFloorplan,D=L.onCloseDialogPostProject,$=L.onStartRotate,J=L.onClickHotspot,X=L.onStopHotspotSound,Q=L.onStartHotspotSound,nn=L.onChangeAutoChangeScene,no=L.onRemoveAllChevronHotspot,nt=L.onToggleModeMultipleStaging,ni=L.onGenerateXMLMenuThumbnailOnVR,ne=(0,s.useCallback)(function(n){var o=p.find(function(o){return o.id===n});o&&d(o)},[p,d]);return(0,s.useEffect)(function(){x&&(X(),no(x.hotspots),nt(!1))},[x]),(0,s.useEffect)(function(){b.on&&g&&Q()},[g,b]),(0,s.useEffect)(function(){if(!k.current&&S&&(null==z?void 0:z.isLoaded)){var n=ni();S.loadXml(n),S.call("hide_selected_scene_from_menu_vr(".concat(null==g?void 0:g.id,")")),k.current=!0}},[null==z?void 0:z.isLoaded,S]),(0,s.useEffect)(function(){g&&k.current&&S.call("hide_selected_scene_from_menu_vr(".concat(g.id,")"))},[g]),(0,a.jsxs)(G.j,{children:[(0,a.jsx)(W,{mode:null==g?void 0:null===(o=g.configStaging)||void 0===o?void 0:o.modeDisplay,scenes:(null==z?void 0:z.isActiveModeMultipleStaging)?T:[],nadirConfig:h||void 0,firstPane:(0,a.jsx)(R,{ref:function(n){C.current||(C.current=n,P(C.current))},nadirConfig:h||void 0,isLoaded:null==z?void 0:z.isLoaded,listScene:p,urlTour:Z||"",setIsLoaded:function(n){M(function(o){return(0,r.Z)((0,l.Z)({},o),{isLoaded:n})}),n?F(S):n||F(null)},krpanoId:j.vd,onClickHotspot:J,divId:"krpanoContainerSnapshot",scene:g||void 0,styleContainer:{height:"100%",width:(null==g?void 0:null===(t=g.configStaging)||void 0===t?void 0:t.modeDisplay)==="split"?"100%":"100vw"},onChangeAutoChangeScene:nn,isTurnOffFollowMode:!!T.length||!_.enable,onChangeScene:ne})}),S&&(0,a.jsxs)(a.Fragment,{children:[s.Children.map(f,function(n){return s.isValidElement(n)?s.cloneElement(n,{krpanoRef:S}):n}),(0,a.jsx)(B,{krpanoRef:S}),(0,a.jsx)(q,{krpanoRef:S,onNextScene:u,onStartRotate:$,isLoaded:null==z?void 0:z.isLoaded})]}),(null==z?void 0:z.idPostProjectSelected)&&(0,a.jsx)(U,{onCancel:D,isUseDefaultStyle:(null==m?void 0:m.selected)==="default",idPost:null==z?void 0:z.idPostProjectSelected,visible:null==z?void 0:z.visibleDialogPostProject}),H&&(0,a.jsx)(V,{onChangeScene:d}),O&&(0,a.jsx)(K,{onChangeScene:d}),E&&(0,a.jsx)(Y,{scenes:(null==g?void 0:null===(i=g.staging)||void 0===i?void 0:i.map(function(n){return(0,r.Z)((0,l.Z)({},n),{config:null==g?void 0:g.config})}))||[],callKrpano:null===(e=C.current)||void 0===e?void 0:e.call})]})})},94178:function(n,o,t){t.d(o,{M:function(){return c},j:function(){return a}});var i=t(7297),e=t(19521);function l(){var n=(0,i.Z)([""]);return l=function(){return n},n}function r(){var n=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n"]);return r=function(){return n},n}var c=e.ZP.div.withConfig({displayName:"styled__TourSettingWrapper",componentId:"Panoee__sc-713bf77e-0"})(l()),a=e.ZP.div.withConfig({displayName:"styled__TourWrapper",componentId:"Panoee__sc-713bf77e-1"})(r())}}]);
//# sourceMappingURL=518.0f4c2df3801737f8.js.map