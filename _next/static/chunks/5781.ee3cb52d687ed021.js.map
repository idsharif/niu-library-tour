{"version":3,"file":"static/chunks/5781.ee3cb52d687ed021.js","mappings":"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","sources":["webpack://_N_E/./containers/Home/components/PopupIntro/styled.ts","webpack://_N_E/./containers/Home/components/PopupIntro/index.tsx","webpack://_N_E/./containers/Home/global/TourStats.tsx","webpack://_N_E/./containers/Home/hook/useDetectMobile.tsx","webpack://_N_E/./node_modules/react-hooks-global-state/dist/index.modern.js","webpack://_N_E/<anon>"],"sourcesContent":["import styled, { keyframes } from 'styled-components';\n\nconst zoomIn = keyframes`\n  from {\n    transform: scale(1);\n  }\n  to {\n    transform: scale(1.1);\n  }\n}`;\n\nexport const PopupIntroWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 20;\n  pointer-events: auto;\n  transition: all 1s ease-out;\n  opacity: 1;\n  &.inactive {\n    pointer-events: none;\n    transform: scale(1.1);\n    opacity: 0;\n    z-index: -1;\n    img,\n    video {\n    }\n    .overlayClose {\n      display: none;\n    }\n  }\n\n  img,\n  video {\n    background-color: #000;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    /* pointer-events: none; */\n  }\n\n  img {\n    animation: ${zoomIn} 2s forwards;\n  }\n\n  .--mobile {\n    display: none;\n  }\n\n  @media (max-width: 640px) {\n    .--mobile {\n      display: block;\n    }\n    .--pc {\n      display: none;\n    }\n  }\n\n  .overlayClose {\n    position: absolute;\n    bottom: 1.5rem;\n    left: 0;\n    right: 0;\n    margin: auto;\n    width: max-content;\n    z-index: 10;\n    .close {\n      padding: 4px 32px;\n      border: 2px solid #ddd;\n      color: #ddd;\n      font-weight: 600;\n      font-size: 1rem;\n      text-align: center;\n      transition: all 0.15s ease-out;\n      cursor: pointer;\n      @media (hover: hover) and (pointer: fine) {\n        &:hover {\n          background: #ddd;\n          color: var(--color-text);\n        }\n      }\n    }\n  }\n`;\n","import { memo, useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectConfigPopupIntro,\n  selectConfigSoundProject,\n} from '@containers/Home/selectors';\nimport { useTourEventState } from '@containers/Home/global/TourStats';\nimport { useKrpano } from '@containers/Home/hook/useKrpano';\nimport { useMobileDetect } from '@containers/Home/hook/useDetectMobile';\nimport { PopupIntroWrapper } from './styled';\nimport dynamic from 'next/dynamic';\nimport { actions } from '@containers/Home/slice';\n\nconst ModalConfirm = dynamic(() => import('@components/ModalConfirm'));\n\nconst PopupIntro = memo(() => {\n  const dispatch = useDispatch();\n  const isMakeChange = useRef(false);\n  const videoRef = useRef<HTMLVideoElement>(null!);\n\n  const { checkDevice } = useMobileDetect();\n\n  const configSound = useSelector(selectConfigSoundProject);\n  const configPopupIntro = useSelector(selectConfigPopupIntro);\n\n  const [isAllowSound, setIsAllowSound] = useState(false);\n  const [visibleModalConfirm, setVisibleModalConfirm] = useState(false);\n\n  const {\n    onSetSoundOnScene,\n    isShowIconInfoPlace,\n    onShowInfoPlace,\n    onCloseDialogPostProject,\n  } = useKrpano({});\n  const [tourEventStats, setTourEventState] = useTourEventState('state');\n\n  const onCloseModalConfirm = useCallback(() => {\n    videoRef?.current?.play();\n    setVisibleModalConfirm(false);\n  }, []);\n\n  const onOKModalConfirm = useCallback(() => {\n    if (videoRef.current) {\n      videoRef.current.muted = false;\n      videoRef.current.volume = 1;\n    }\n    setIsAllowSound(true);\n\n    onCloseModalConfirm();\n  }, [onCloseModalConfirm]);\n\n  const onClosePopupIntro = useCallback(() => {\n    if (videoRef?.current) videoRef?.current?.pause();\n    if (configPopupIntro?.type === 'post') onCloseDialogPostProject();\n    setTourEventState(prev => ({\n      ...prev,\n      isVisiblePopupIntro: false,\n    }));\n    if (configSound.on === undefined || configSound.on === null) {\n      if (isAllowSound) {\n        onSetSoundOnScene(true);\n        dispatch(actions.setConfigSoundProject({ on: true }));\n      }\n    }\n  }, [\n    dispatch,\n    configSound,\n    isAllowSound,\n    configPopupIntro,\n    onSetSoundOnScene,\n    setTourEventState,\n    onCloseDialogPostProject,\n  ]);\n\n  useEffect(() => {\n    if (tourEventStats.isVisiblePopupIntro === undefined) {\n      const isVisiblePopupIntro =\n        ((configPopupIntro?.type === 'image' &&\n          configPopupIntro?.imageDesktop) ||\n          (configPopupIntro?.type === 'video' &&\n            configPopupIntro?.videoDesktop) ||\n          (configPopupIntro?.type === 'post' && isShowIconInfoPlace)) &&\n        !!configPopupIntro?.isEnabled;\n      if (isVisiblePopupIntro) {\n        if (configPopupIntro?.type === 'post') {\n          onShowInfoPlace();\n          isMakeChange.current = true;\n        }\n        if (configPopupIntro?.type === 'video' && videoRef.current) {\n          // videoRef.current.volume = 1;\n          if (configSound.on && !configPopupIntro.mute) onOKModalConfirm();\n          else if (\n            (configSound.on === undefined || configSound.on === null) &&\n            !configPopupIntro.mute\n          )\n            setVisibleModalConfirm(true);\n          else {\n            videoRef.current.muted = true;\n            videoRef.current.autoplay = true;\n          }\n        }\n      }\n      setTourEventState(prev => ({ ...prev, isVisiblePopupIntro }));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (\n      tourEventStats.isVisiblePopupIntro &&\n      configPopupIntro?.isAutoClose &&\n      configPopupIntro?.type !== 'post'\n    )\n      setTimeout(() => {\n        onClosePopupIntro();\n      }, +configPopupIntro?.timeAutoClose * 1000);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tourEventStats.isVisiblePopupIntro, configPopupIntro]);\n\n  useEffect(() => {\n    if (\n      configPopupIntro?.type === 'post' &&\n      isMakeChange.current &&\n      !tourEventStats.visibleDialogPostProject &&\n      tourEventStats.isVisiblePopupIntro !== undefined\n    )\n      onClosePopupIntro();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tourEventStats.visibleDialogPostProject]);\n\n  return (\n    <PopupIntroWrapper\n      className={tourEventStats.isVisiblePopupIntro !== false ? '' : 'inactive'}\n    >\n      {configPopupIntro && configPopupIntro?.isEnabled && (\n        <>\n          {configPopupIntro?.type === 'image' && (\n            <>\n              <img\n                src={configPopupIntro?.imageDesktop}\n                alt=\"\"\n                className=\"--pc\"\n              />\n              <img\n                src={\n                  configPopupIntro?.imageMobile ||\n                  configPopupIntro?.imageDesktop\n                }\n                alt=\"\"\n                className=\"--mobile\"\n              />\n            </>\n          )}\n\n          {configPopupIntro?.type === 'video' && (\n            <>\n              {!checkDevice().isMobile() ? (\n                <video\n                  muted\n                  playsInline\n                  ref={videoRef}\n                  onEnded={onClosePopupIntro}\n                >\n                  <source\n                    src={configPopupIntro?.videoDesktop}\n                    type=\"video/mp4\"\n                  />\n                </video>\n              ) : (\n                <video\n                  muted\n                  playsInline\n                  ref={videoRef}\n                  onEnded={onClosePopupIntro}\n                  className=\"--mobile\"\n                  autoPlay={!!configPopupIntro.mute}\n                >\n                  <source\n                    src={\n                      (configPopupIntro?.videoMobile ||\n                        configPopupIntro?.videoDesktop) + '#t=0.001'\n                    }\n                    type=\"video/mp4\"\n                  />\n                </video>\n              )}\n            </>\n          )}\n\n          {configPopupIntro?.type !== 'post' && (\n            <div className=\"overlayClose\">\n              <div onClick={onClosePopupIntro} className=\"close\">\n                {configPopupIntro?.textClose || 'Close'}\n              </div>\n            </div>\n          )}\n        </>\n      )}\n\n      {visibleModalConfirm && (\n        <ModalConfirm\n          visible={visibleModalConfirm}\n          onOK={onOKModalConfirm}\n          onCancel={onCloseModalConfirm.bind(this, false)}\n        />\n      )}\n    </PopupIntroWrapper>\n  );\n});\n\nexport default PopupIntro;\n","import { Type_RefFuncKrpano } from '@components/Krpano/types';\nimport { createGlobalState } from 'react-hooks-global-state';\nimport { I_CommentScene, I_PayloadCommentScene } from '../types';\n\nconst { useGlobalState: useVLookatKrpano } = createGlobalState<{\n  vlookat?: number;\n}>({ vlookat: undefined });\n\nconst { useGlobalState: useHLookatKrpano } = createGlobalState<{\n  hlookat?: number;\n}>({ hlookat: undefined });\n\nconst { useGlobalState: useZoomKrpano } = createGlobalState<{ zoom?: number }>({\n  zoom: undefined,\n});\n\nconst { useGlobalState: useCollaborationMode } = createGlobalState<{\n  loading: boolean;\n  krpanoRef?: Type_RefFuncKrpano;\n  commentSceneSelected?: I_CommentScene | null;\n  isShowDialogCreateCommentScene?: boolean;\n  commentSceneTemporary?: I_PayloadCommentScene | null;\n}>({\n  loading: false,\n  krpanoRef: undefined,\n  commentSceneSelected: null,\n  isShowDialogCreateCommentScene: false,\n  commentSceneTemporary: null,\n});\n\nconst { useGlobalState: useTourStats } = createGlobalState<{\n  stats: {\n    isShowControlbar?: boolean;\n    btnDirectionActive?: string;\n  };\n}>({\n  stats: {\n    isShowControlbar: true, // for theme\n    btnDirectionActive: '',\n  },\n});\n\nconst { useGlobalState: useTourEventState } = createGlobalState<{\n  state: {\n    isLoaded?: boolean;\n    idPostProjectSelected?: string;\n    visibleDialogPostProject?: boolean;\n    idPostSceneSelected?: string;\n    visibleDialogPostScene?: boolean;\n    isSoundOnScene?: boolean;\n    isVisibleMap?: boolean;\n    isVisibleFloorplan?: boolean;\n    isVisiblePopupIntro?: boolean;\n    isActiveModeMultipleStaging?: boolean;\n  };\n}>({\n  state: {\n    isLoaded: false,\n    //\n    idPostProjectSelected: '',\n    visibleDialogPostProject: false,\n    //\n    idPostSceneSelected: '',\n    visibleDialogPostScene: false,\n    isSoundOnScene: false,\n    //\n    isVisibleMap: true,\n    isVisibleFloorplan: true,\n    isVisiblePopupIntro: undefined,\n    isActiveModeMultipleStaging: false,\n  },\n});\n\nexport {\n  useTourStats,\n  useZoomKrpano,\n  useHLookatKrpano,\n  useVLookatKrpano,\n  useTourEventState,\n  useCollaborationMode,\n};\n","/* eslint-disable no-useless-escape */\nimport { useMemo, useCallback } from 'react';\n\nexport const useMobileDetect = () => {\n  const checkDevice = useCallback(() => {\n    const flagIsMobile =\n      typeof window === 'undefined'\n        ? 0\n        : window.matchMedia('only screen and (max-width: 760px)').matches;\n\n    const isMobile = () => flagIsMobile;\n\n    return {\n      isMobile,\n    };\n  }, []);\n\n  return useMemo(\n    () => ({\n      checkDevice,\n    }),\n    [checkDevice],\n  );\n};\n","import{useReducer as t,useEffect as e,useRef as r,useState as o,useCallback as n}from\"react\";function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}const c=(t,e)=>{if(!t.includes(e))throw new Error(`'${e}' not found. It must be provided in initialState as a property key.`)},a=\"production\"!==process.env.NODE_ENV?Symbol(\"UPDATE_STATE\"):Symbol(),l=(l,u)=>{const i=Object.keys(u);let p=u,d=null;const f={};i.forEach(t=>{f[t]=new Set});const E=(t,e)=>e.type===a?e.r?e.r(t):e.e:l(t,e),S=(t,e)=>{\"production\"!==process.env.NODE_ENV&&c(i,t);const r=r=>{return s({},r,{[t]:(o=r[t],n=e,\"function\"==typeof n?n(o):n)});var o,n};if(d)d({type:a,r});else{p=r(p);const e=p[t];f[t].forEach(t=>t(e))}},b=(t,e)=>{i.forEach(r=>{const o=e[r];t[r]!==o&&f[r].forEach(t=>t(o))})};return{useGlobalStateProvider:()=>{const[o,n]=t(E,p);e(()=>{if(d)throw new Error(\"Only one global state provider is allowed\");return d=n,n({type:a,e:p}),()=>{d=null}},[]);const s=r(o);b(s.current,o),s.current=o,e(()=>{p=o},[o])},useGlobalState:t=>{\"production\"!==process.env.NODE_ENV&&c(i,t);const[r,s]=o(p[t]);return e(()=>(f[t].add(s),s(p[t]),()=>{f[t].delete(s)}),[t]),[r,n(e=>S(t,e),[t])]},getGlobalState:t=>(\"production\"!==process.env.NODE_ENV&&c(i,t),p[t]),setGlobalState:S,getState:()=>p,setState:t=>{if(d)d({type:a,e:t});else{const e=p;p=t,b(e,p)}},dispatch:t=>{if(d)d(t);else{const e=p;p=l(p,t),b(e,p)}return t}}},u=t=>l((t,e)=>t,t),i=(t,e=t(void 0,{type:void 0}),r)=>r?r(i)(t,e):l(t,e),p=()=>{if(!window.__REDUX_DEVTOOLS_EXTENSION__)return t=>t;const{before:t,after:e}=(()=>{let t,e;return{before:r=>(o,n,c)=>{if(t=o,e=n,c)return c(r)(o,n);const a=r(o,n);return s({},a,{useGlobalState:t=>{const[e]=a.useGlobalState(t);return[e,()=>{throw new Error(\"Update is not allowed when using DevTools\")}]}})},after:r=>(o,n,c)=>{if(c)return c(r)(o,n);const a=r(t,e);let l=s({},o(n,{type:\"@@redux/INIT\"}),e);const u=[];return s({},a,{getState:()=>l,dispatch:t=>(l=o(l,t),a.setState(l.computedStates[l.currentStateIndex].state),u.forEach(t=>t()),t),subscribe:t=>(u.push(t),()=>{const e=u.indexOf(t);u.splice(e,1)})})}}})();return((...t)=>t.reduce((t,e)=>(...r)=>t(e(...r))))(t,window.__REDUX_DEVTOOLS_EXTENSION__(),e)};export{u as createGlobalState,i as createStore,p as reduxDevToolsExt};\n//# sourceMappingURL=index.modern.mjs.map\n"],"names":["zoomIn","keyframes","PopupIntroWrapper","styled","ModalConfirm","dynamic","__webpack_require__","e","then","bind","components_PopupIntro","memo","dispatch","useDispatch","isMakeChange","useRef","videoRef","checkDevice","useMobileDetect","configSound","useSelector","selectConfigSoundProject","configPopupIntro","selectConfigPopupIntro","useState","isAllowSound","setIsAllowSound","visibleModalConfirm","setVisibleModalConfirm","useKrpano","onSetSoundOnScene","isShowIconInfoPlace","onShowInfoPlace","onCloseDialogPostProject","useTourEventState","tourEventStats","setTourEventState","onCloseModalConfirm","useCallback","current","play","onOKModalConfirm","muted","volume","onClosePopupIntro","pause","type","prev","_object_spread_props","Z","_object_spread","isVisiblePopupIntro","undefined","on","actions","useEffect","imageDesktop","videoDesktop","isEnabled","mute","autoplay","isAutoClose","setTimeout","timeAutoClose","visibleDialogPostProject","jsx_runtime","jsxs","className","Fragment","jsx","img","src","alt","imageMobile","isMobile","video","playsInline","ref","onEnded","autoPlay","source","videoMobile","div","onClick","textClose","visible","onOK","onCancel","_this","useGlobalState","createGlobalState","vlookat","hlookat","zoom","loading","krpanoRef","commentSceneSelected","isShowDialogCreateCommentScene","commentSceneTemporary","stats","isShowControlbar","btnDirectionActive","state","isLoaded","idPostProjectSelected","idPostSceneSelected","visibleDialogPostScene","isSoundOnScene","isVisibleMap","isVisibleFloorplan","isActiveModeMultipleStaging","flagIsMobile","window","matchMedia","matches","useMemo","s","Object","assign","t","arguments","length","r","o","prototype","hasOwnProperty","call","apply","a","Symbol","l","u","i","keys","p","d","f","forEach","Set","E","S","n","b","useGlobalStateProvider","react__WEBPACK_IMPORTED_MODULE_0__","useReducer","add","delete","getGlobalState","setGlobalState","getState","setState"],"sourceRoot":""}