{"version":3,"file":"static/chunks/6490.ad15df8db1ac74f7.js","mappings":"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","sources":["webpack://_N_E/./node_modules/antd/es/_util/getRenderPropValue.js","webpack://_N_E/./node_modules/antd/es/popover/index.js","webpack://_N_E/./containers/Home/components/Collaboration/CommentScene/CommentBox.tsx","webpack://_N_E/<anon>"],"sourcesContent":["export var getRenderPropValue = function getRenderPropValue(propValue) {\n  if (!propValue) {\n    return null;\n  }\n  if (typeof propValue === 'function') {\n    return propValue();\n  }\n  return propValue;\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport Tooltip from '../tooltip';\nimport { getRenderPropValue } from '../_util/getRenderPropValue';\nimport { getTransitionName } from '../_util/motion';\nvar Overlay = function Overlay(_ref) {\n  var title = _ref.title,\n    content = _ref.content,\n    prefixCls = _ref.prefixCls;\n  if (!title && !content) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, title && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-title\")\n  }, getRenderPropValue(title)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-inner-content\")\n  }, getRenderPropValue(content)));\n};\nvar Popover = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var customizePrefixCls = props.prefixCls,\n    title = props.title,\n    content = props.content,\n    _overlay = props._overlay,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'top' : _props$placement,\n    _props$trigger = props.trigger,\n    trigger = _props$trigger === void 0 ? 'hover' : _props$trigger,\n    _props$mouseEnterDela = props.mouseEnterDelay,\n    mouseEnterDelay = _props$mouseEnterDela === void 0 ? 0.1 : _props$mouseEnterDela,\n    _props$mouseLeaveDela = props.mouseLeaveDelay,\n    mouseLeaveDelay = _props$mouseLeaveDela === void 0 ? 0.1 : _props$mouseLeaveDela,\n    _props$overlayStyle = props.overlayStyle,\n    overlayStyle = _props$overlayStyle === void 0 ? {} : _props$overlayStyle,\n    otherProps = __rest(props, [\"prefixCls\", \"title\", \"content\", \"_overlay\", \"placement\", \"trigger\", \"mouseEnterDelay\", \"mouseLeaveDelay\", \"overlayStyle\"]);\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls;\n  var prefixCls = getPrefixCls('popover', customizePrefixCls);\n  var rootPrefixCls = getPrefixCls();\n  return /*#__PURE__*/React.createElement(Tooltip, _extends({\n    placement: placement,\n    trigger: trigger,\n    mouseEnterDelay: mouseEnterDelay,\n    mouseLeaveDelay: mouseLeaveDelay,\n    overlayStyle: overlayStyle\n  }, otherProps, {\n    prefixCls: prefixCls,\n    ref: ref,\n    overlay: _overlay || /*#__PURE__*/React.createElement(Overlay, {\n      prefixCls: prefixCls,\n      title: title,\n      content: content\n    }),\n    transitionName: getTransitionName(rootPrefixCls, 'zoom-big', otherProps.transitionName)\n  }));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Popover.displayName = 'Popover';\n}\nexport default Popover;","import { memo, useCallback, useEffect, useRef, useState } from 'react';\nimport { Button, Popover } from 'antd';\nimport Picker from 'emoji-picker-react';\nimport { CommentBoxWrapper } from './styled';\n\ninterface Props {\n  initValue: string;\n  loading?: boolean;\n  isShowBtnReset?: boolean;\n  isShowBtnCancel?: boolean;\n  onSubmit: (value: string) => void;\n  onCancel: () => void;\n}\n\nconst CommentBox = memo(\n  ({\n    initValue,\n    loading,\n    isShowBtnCancel = true,\n    isShowBtnReset = false,\n    onSubmit,\n    onCancel,\n  }: Props) => {\n    const inputRef = useRef<HTMLTextAreaElement>();\n    const [value, setValue] = useState(null);\n\n    const onCheckEscape = useCallback(\n      event => {\n        if (event.key === 'Escape') onCancel();\n        if (event.keyCode === 13) {\n          if (!event.shiftKey) {\n            onCancel();\n            onSubmit(value);\n            event.preventDefault();\n          }\n        }\n      },\n      [onCancel, onSubmit, value],\n    );\n\n    useEffect(() => {\n      const inputInstance = inputRef.current;\n      if (inputInstance)\n        inputInstance.addEventListener('keydown', onCheckEscape);\n      return () => {\n        if (inputInstance)\n          inputInstance.removeEventListener('keydown', onCheckEscape);\n      };\n    }, [onCheckEscape]);\n\n    useEffect(() => {\n      inputRef.current.focus();\n      if (value === null) setValue(initValue);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [initValue]);\n\n    const onEmojiClick = useCallback((_e, emoji) => {\n      setValue(prev => prev + emoji.emoji);\n    }, []);\n\n    const _onReset = useCallback(() => {\n      setValue('');\n    }, []);\n\n    const _onSubmit = useCallback(() => {\n      onSubmit(value);\n      if (isShowBtnReset) _onReset();\n      onCancel();\n    }, [isShowBtnReset, _onReset, value, onSubmit, onCancel]);\n\n    return (\n      <CommentBoxWrapper>\n        <textarea\n          ref={inputRef}\n          value={value || ''}\n          onChange={e => setValue(e.target.value)}\n          rows={3}\n          placeholder=\"Write something...\"\n        />\n        <div className=\"--bottom\">\n          <div className=\"act-main\">\n            <Button\n              loading={loading}\n              size=\"small\"\n              className=\"--btn --submit\"\n              onClick={_onSubmit}\n            >\n              <i aria-hidden className=\"fal fa-check\" />\n              <span>Submit</span>\n            </Button>\n            {isShowBtnReset && (\n              <Button\n                size=\"small\"\n                className=\"--btn --cancel\"\n                onClick={_onReset}\n              >\n                <i aria-hidden className=\"fal fa-undo-alt\" />\n                <span>Reset</span>\n              </Button>\n            )}\n            {isShowBtnCancel && (\n              <Button\n                size=\"small\"\n                className=\"--btn --cancel\"\n                onClick={onCancel}\n              >\n                <i aria-hidden className=\"fal fa-times\" />\n                <span>Cancel</span>\n              </Button>\n            )}\n          </div>\n          <div className=\"act-extra\">\n            <Popover\n              trigger=\"click\"\n              content={\n                <Picker onEmojiClick={onEmojiClick} disableAutoFocus native />\n              }\n              onOpenChange={isVisible => {\n                if (!isVisible) inputRef.current?.focus();\n              }}\n              zIndex={101}\n            >\n              <i aria-hidden className=\"fas fa-grin-alt\" />\n            </Popover>\n          </div>\n        </div>\n      </CommentBoxWrapper>\n    );\n  },\n);\n\nexport default CommentBox;\n"],"names":["getRenderPropValue","propValue","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","Overlay","_ref","title","content","prefixCls","react","createElement","Fragment","className","concat","popover","forwardRef","props","ref","customizePrefixCls","_overlay","_props$placement","placement","_props$trigger","trigger","_props$mouseEnterDela","mouseEnterDelay","_props$mouseLeaveDela","mouseLeaveDelay","_props$overlayStyle","overlayStyle","otherProps","getPrefixCls","_React$useContext","useContext","context","E_","rootPrefixCls","tooltip","Z","esm_extends","overlay","transitionName","motion","mL","CommentBox","memo","param","initValue","loading","isShowBtnCancel","_param_isShowBtnReset","isShowBtnReset","onSubmit","onCancel","inputRef","useRef","useState","value","setValue","onCheckEscape","useCallback","event","key","keyCode","shiftKey","preventDefault","useEffect","inputInstance","current","addEventListener","removeEventListener","focus","onEmojiClick","_e","emoji","prev","_onReset","_onSubmit","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","CommentBoxWrapper","jsx","textarea","onChange","target","rows","placeholder","div","Button","size","onClick","aria-hidden","span","_param_isShowBtnCancel","Popover","Picker","disableAutoFocus","native","onOpenChange","isVisible","zIndex","__webpack_exports__"],"sourceRoot":""}